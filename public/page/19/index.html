<!DOCTYPE html>
<html><head>
	<meta name="generator" content="Hugo 0.128.2"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
<title>Malinkang&#39;s Blog</title>



  


<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">











  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-G84J9N38RL"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-G84J9N38RL');
        }
      </script>
    
  








  






    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.c6e68b913da16a092755d6c22435d1331fd1af82c857538edbdca3203413fe72.css" integrity="sha256-xuaLkT2hagknVdbCJDXRMx/Rr4LIV1OO29yjIDQT/nI=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">

















<script>
  var meting_api='https://meting-api.malinkang.com/api?server=:server&type=:type&id=:id&auth=:auth&r=:r';
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>




</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    Home
                </a>
                
            
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="http://localhost:1313/">
            Malinkang&#39;s Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="http://localhost:1313/">
        <div class="single-column-header-title">Malinkang&#39;s Blog</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-no-background">
        
        
            <a href="/android/graphics/drawable/" class="a-block">
                <div class="post-item-wrapper">
                    <div class="post-item post-item-no-divider">
                        <div class="post-item-info-wrapper">
                            <div class="post-item-title">
                                
                            </div>
                            <div class="post-item-summary">
                                
                                    Drawable使用 Drawable是“可绘制的东西”的一般抽象。大多数情况下，您将处理Drawable作为将东西绘制到屏幕上的资源类型; Drawable类提供了一个通用API，用于处理可能采用各种形式的底层可视资源。与视图不同，Drawable没有任何设备可以接收事件或以其他方式与用户交互。
除了简单的绘图之外，Drawable还提供了一些通用的机制，以便客户端与所绘制的内容进行交互：
必须调用setBounds（Rect）方法来告诉Drawable绘制的位置以及它应该有多大。所有的Drawable都应该遵循所请求的大小，通常只需缩放它们的图像。客户端可以使用getIntrinsicHeight（）和getIntrinsicWidth（）方法找到一些Drawable的首选大小。 getPadding（Rect）方法可以从一些Drawable信息返回关于如何框架放置在其中的内容。例如，一个想要作为按钮小部件的框架的Drawable将需要返回将标签正确放置在其内部的填充。 setState（int []）方法允许客户端告诉Drawable在哪个状态下被绘制，例如“focus”，“selected”等。一些可绘制可以根据所选状态来修改它们的图像。 setLevel（int）方法允许客户端提供可以修改Drawable的单个连续控制器，例如电池电量或进度级别。一些可绘制可以根据当前水平修改其图像。 Drawable可以通过Drawable.Callback界面回调其客户端来执行动画。所有客户端都应该支持这个界面（通过setCallback（Drawable.Callback）），以便动画可以工作。一个简单的方法是通过系统设施，如setBackground（Drawable）和ImageView。 虽然应用程序通常不可见，但Drawable可能采用各种形式：
Bitmap：最简单的Drawable，PNG或JPEG图像。 Nine Patch：PNG格式的扩展允许它指定有关如何拉伸和放置内容的信息。 Vector：在XML文件中定义的一个drawable作为一组点，线和曲线及其关联的颜色信息。可以缩放这种类型的可绘制，而不会损失显示质量。 Shape：包含简单的绘图命令而不是原始位图，允许它在某些情况下更好地调整大小。 Layers：一个复合的drawable，它可以在彼此之上绘制多个底层可绘图。 States：根据其状态选择一组可绘图之一的复合绘制。 Levels：根据其级别选择一组可绘图之一的复合绘图。 Scale：一个单个可绘制单元的复合绘制，其总体尺寸根据当前水平进行修改。自 定义可绘制 所有版本的Android允许在运行时扩展和使用Drawable类代替框架提供的可绘制类。从API 24开始，可以在XML中使用自定义可绘图类。注意：自定义可绘制类只能在应用程序包中访问。其他应用程序将无法加载它们。至少，自定义drawable类必须在Drawable上实现抽象方法，并且应该覆盖Draw（Canvas）方法来绘制内容。可以以多种方式在XML中使用自定义可绘制类：
将完全限定类名用作XML元素名称。对于此方法，自定义drawable类必须是公共顶级类。 1 2 &lt;com.myapp.MyCustomDrawable xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:color=&#34;#ffff0000&#34; /&gt; 使用drawable作为XML元素名称，并从类属性中指定完全限定类名。此方法可用于公共顶层类和公共静态内部类。
1 2 3 &lt;drawable xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; class=&#34;com.myapp.MyTopLevelClass$InnerCustomDrawable&#34; android:color=&#34;#ffff0000&#34; /&gt; 
                                
                            </div>
                            <div class="post-item-meta">
    0001-01-01
    &emsp;
    
    
    
    &emsp;
    
</div>

                        </div>
                        
                        
                    </div>
                </div>
        
            <a href="/android/graphics/matrix/" class="a-block">
                <div class="post-item-wrapper">
                    <div class="post-item post-item-no-divider">
                        <div class="post-item-info-wrapper">
                            <div class="post-item-title">
                                
                            </div>
                            <div class="post-item-summary">
                                
                                    参考 深入理解 Android 中的 Matrix 安卓自定义View进阶-Matrix详解 安卓自定义View进阶-Matrix原理 Android中关于矩阵（Matrix）前乘后乘的一些认识 
                                
                            </div>
                            <div class="post-item-meta">
    0001-01-01
    &emsp;
    
    
    
    &emsp;
    
</div>

                        </div>
                        
                        
                    </div>
                </div>
        
            <a href="/android/graphics/physics-based-animations/" class="a-block">
                <div class="post-item-wrapper">
                    <div class="post-item post-item-no-divider">
                        <div class="post-item-info-wrapper">
                            <div class="post-item-title">
                                
                            </div>
                            <div class="post-item-summary">
                                
                                     
                                
                            </div>
                            <div class="post-item-meta">
    0001-01-01
    &emsp;
    
    
    
    &emsp;
    
</div>

                        </div>
                        
                        
                    </div>
                </div>
        
            <a href="/android/graphics/property-animation/" class="a-block">
                <div class="post-item-wrapper">
                    <div class="post-item post-item-no-divider">
                        <div class="post-item-info-wrapper">
                            <div class="post-item-title">
                                
                            </div>
                            <div class="post-item-summary">
                                
                                    属性动画系统是一个强大的框架，允许您使几乎任何事物产生动画。您可以定义一个动画以随时间更改任何对象属性，无论它是否绘制到屏幕。属性动画在指定的时间长度内更改属性（对象中的字段）值。要动画某些东西，您可以指定要对其进行动画处理的对象属性，例如对象在屏幕上的位置，要对其进行动画处理的时间以及要在其间进行动画处理的值。
属性动画系统允许您定义动画的以下特征：
时间插值：您可以指定如何根据动画当前所用时间计算属性值。 重复计数和行为：您可以指定是否在持续时间结束时重复动画，并重复播放动画的次数。您还可以指定是否要相反地播放动画。将其设置为反向播放动画向前，然后反复向后，直到达到重复次数。 动画集：您可以将动画组合到一起或顺序播放或指定延迟之后的逻辑集。 帧刷新延迟：您可以指定刷新动画帧的频率。默认设置为每10ms更新一次，但是应用程序刷新帧的速度最终取决于系统整体的繁忙程度，以及系统能够为底层定时器提供多长时间的服务。 属性动画原理 首先，我们来看一个动画如何工作，一个简单的例子。下图描绘了一个假设的对象，它以x属性为动画，表示其在屏幕上的水平位置。动画的持续时间设置为40 ms，行驶距离为40像素。每10 ms，这是默认的帧刷新率，对象水平移动10像素。在40ms结束时，动画停止，物体在水平位置40处结束。这是具有线性插值的动画的示例，意味着物体以恒定的速度移动。
您还可以指定具有非线性内插的动画。下图描绘了在动画开始时加速的假想对象，并且在动画结束时减速。物体仍然在40毫秒内移动40像素，但是非线性。一开始，这个动画加速到中途，然后从中途减速直到动画结束。如下图所示，动画开始和结束时行进的距离小于中间。
我们来详细了解属性动画系统的重要组件如何计算如上所示的动画。下图描绘了主要类之间如何工作。
ValueAnimator对象跟踪您的动画的时间，例如动画已运行多长时间，以及动画所属属性的当前值。
ValueAnimator封装了TimeInterpolator，它定义了动画插值，还有一个TypeEvaluator，它定义了如何计算动画属性的值。例如，在图2中，使用的TimeInterpolator将为AccelerateDecelerateInterpolator，TypeEvaluator将为IntEvaluator。
要启动动画，请创建一个ValueAnimator，并为其创建动画的属性以及动画持续时间给出它的开始和结束值。当你调用start（）动画开始。在整个动画过程中，ValueAnimator根据动画的持续时间和经过多少时间，计算0到1之间的经过分数。经过的分数表示动画完成的时间百分比，0表示0％，1表示100％。例如，在图1中，t = 10ms时的经过分数为0.25，因为总持续时间为t = 40ms。
当ValueAnimator完成计算经过的分数时，它调用当前设置的TimeInterpolator，以计算插值分数。插值分数将经过的分数映射到考虑到设置的时间插值的新分数。例如，在图2中，由于动画缓慢加速，所以在t = 10 ms时，内插分数约为.15，小于经过分数.25。在图1中，插值分数总是与经过分数相同。
当计算插值分数时，ValueAnimator将根据插值分数，起始值和动画的结束值，调用相应的TypeEvaluator来计算您要动画化的属性值。例如，在图2中，在t = 10 ms时插值分数为.15，因此该时间的属性值为.15 X（40 - 0）或6。
属性动画和View动画的区别 View动画系统提供了只能对View对象进行动画化的功能，因此，如果您想为非View对象设置动画效果，则必须实现自己的代码。视图动画系统也受到限制，因为它仅将View对象的几个方面暴露给动画，例如视图的缩放和旋转，而不是背景颜色。
View动画系统的另一个缺点是它只修改了View的绘制位置，而不是实际的View本身。例如，如果您将动画按钮移动到屏幕上，则按钮正确绘制，但您可以单击按钮的实际位置不会更改，因此您必须实现自己的逻辑来处理此问题。
使用属性动画系统，这些约束被完全删除，您可以对任何对象（视图和非视图）的任何属性进行动画处理，并且对象本身实际上进行了修改。属性动画系统在执行动画的过程中也更为强大。在高层次上，您可以为要动画化的属性（如颜色，位置或大小）分配动画师，并可以定义动画的各个方面，如多个动画制作工具的插值和同步。
然而，视图动画系统需要较少的时间来设置，并且需要较少的代码来写入。如果视图动画完成了您需要执行的所有操作，或者如果现有代码已经按照您想要的方式工作，则不需要使用属性动画系统。如果出现用例，在不同情况下使用动画系统也可能是有意义的。
API 概览 您可以在android.animation中找到大部分属性动画系统的API。 因为视图动画系统已经在android.view.animation中定义了许多插值器，所以您也可以在属性动画系统中使用这些插值器。 下表描述了属性动画系统的主要组件。
Animator类提供了创建动画的基本结构。 您通常不直接使用此类，因为它只提供必须扩展的最小功能，以完全支持动画值。 以下子类扩展了Animator：
类 描述 ValueAnimator 属性动画的主要定时引擎，也可以计算要动画的属性的值。它具有计算动画值的所有核心功能，并包含每个动画的时序细节，有关动画重复的信息，接收更新事件的收听者以及设置自定义类型进行评估的能力。动画属性有两部分：计算动画值，并在动画对象和属性上设置这些值。 ValueAnimator不执行第二部分，因此您必须监听由ValueAnimator计算的值的更新，并使用自己的逻辑修改要进行动画化的对象。 ObjectAnimator ValueAnimator的子类，允许您将目标对象和对象属性设置为动画。 当该类计算动画的新值时，此类将相应地更新该属性。 你想在大多数时候使用ObjectAnimator，因为它使得在目标对象上动画化值的过程更容易。 但是，有时候您希望直接使用ValueAnimator，因为ObjectAnimator还有一些限制，例如需要在目标对象上存在特定的教程方法。 AnimatorSet 提供一种将动画分组在一起的机制，以便它们相互运行。 您可以将动画设置为一起播放，顺序播放或指定延迟播放。 有关详细信息，请参阅有关使用动画组合编排多个动画的部分。 Evaluators告诉属性动画系统如何计算给定属性的值。 它们获取Animator类提供的时间数据，动画的开始和结束值，并根据此数据计算属性的动画值。 属性动画系统提供以下评估者：
表2. Evaluators
类/接口 描述 IntEvaluator 用于计算int属性值的默认Evaluator FloatEvaluator 用于计算float属性值的默认Evaluator ArgbEvaluator 用于计算以十六进制值表示的颜色属性的值的默认用于计算float属性值的默认Evaluator。 TypeEvaluator 一个允许您创建自己的Evaluator的接口。 如果要动画的对象属性化不是int，float或color的对象属性，则必须实现TypeEvaluator接口以指定如何计算对象属性的动画值。 如果要处理不同于默认行为的类型，还可以为int，float和color值指定自定义的TypeEvaluator。 时间插值器定义如何计算动画中的特定值作为时间的函数。 例如，您可以指定动画在整个动画中线性发生，这意味着动画在整个时间内均匀移动，或者您可以指定使用非线性时间的动画，例如，在开始时加速并在 动画。 表3描述了android.
                                
                            </div>
                            <div class="post-item-meta">
    0001-01-01
    &emsp;
    
    
    
    &emsp;
    
</div>

                        </div>
                        
                        
                    </div>
                </div>
        
            <a href="/android/graphics/readme/" class="a-block">
                <div class="post-item-wrapper">
                    <div class="post-item post-item-no-divider">
                        <div class="post-item-info-wrapper">
                            <div class="post-item-title">
                                
                            </div>
                            <div class="post-item-summary">
                                
                                    图形和图像 
                                
                            </div>
                            <div class="post-item-meta">
    0001-01-01
    &emsp;
    
    
    
    &emsp;
    
</div>

                        </div>
                        
                        
                    </div>
                </div>
        
        </a>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head active" href="http://localhost:1313/">
    
        <div class="nav-title">
            Malinkang&#39;s Blog
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                Home
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	malinkang
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
        

        <a class="pagination-action"  href="/page/18/">
            
            <i class="material-icons pagination-action-icon">
                chevron_left
            </i>
        </a>

        <div class="pagination-indicator">
            <span style="text-align: center">
                19<br>
                <div style="display: inline-block; transform: rotate(-28deg)">-</div><br>53
            </span>
        </div>


        <a class="pagination-action"  href="/page/20/">
            
            <i class="material-icons pagination-action-icon">
                chevron_right
            </i>
        </a>
        
        
    </div>
</div>


<div class="pagination">
    
    <a class="pagination-action" href="/page/18/" style="opacity:1">
    
        <i class="material-icons pagination-action-icon">
            chevron_left
        </i>
    </a>

        <div class="pagination-indicator">
            <span>19/53</span>
        </div>

        
        <a class="pagination-action" href="/page/20/"
           style="opacity:1">
        
                <i class="material-icons pagination-action-icon">
                    chevron_right
                </i>
            </a>
</div>



<div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	malinkang
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
