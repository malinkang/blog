<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="[ËØë]JavaÊ≥®Ëß£Â§ÑÁêÜÂô® ÁøªËØëÂèÇËÄÉÔºöJavaÊ≥®Ëß£Â§ÑÁêÜÂô®\nÂéüÊñá\nÂú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂ∞ÜÈòêËø∞ÊÄéÊ†∑ÂÜô‰∏Ä‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®(Annotation Processor)„ÄÇÂú®ËøôÁØáÊïôÁ®ã‰∏≠ÔºåÈ¶ñÂÖàÔºåÊàëÂ∞ÜÂêëÊÇ®Ëß£Èáä‰ªÄ‰πàÊòØÊ≥®Ëß£Âô®Ôºå‰Ω†ÂèØ‰ª•Âà©Áî®Ëøô‰∏™Âº∫Â§ßÁöÑÂ∑•ÂÖ∑ÂÅö‰ªÄ‰πà‰ª•Âèä‰∏çËÉΩÂÅö‰ªÄ‰πàÔºõÁÑ∂ÂêéÔºåÊàëÂ∞Ü‰∏ÄÊ≠•‰∏ÄÊ≠•ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊ≥®Ëß£Âô®„ÄÇ\n‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµ Âú®ÂºÄÂßã‰πãÂâçÔºåÊàë‰ª¨È¶ñÂÖàÁî≥Êòé‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÈóÆÈ¢òÔºöÊàë‰ª¨Âπ∂‰∏çËÆ®ËÆ∫ÈÇ£‰∫õÂú®ËøêË°åÊó∂ÔºàRuntimeÔºâÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂ËøêË°åÂ§ÑÁêÜÁöÑÊ≥®Ëß£ÔºåËÄåÊòØËÆ®ËÆ∫Âú®ÁºñËØëÊó∂ÔºàCompile timeÔºâÂ§ÑÁêÜÁöÑÊ≥®Ëß£„ÄÇ\nÊ≥®Ëß£Â§ÑÁêÜÂô®ÔºàAnnotation ProcessorÔºâÊòØjavacÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑ÔºåÂÆÉÁî®Êù•Âú®ÁºñËØëÊó∂Êâ´ÊèèÂíåÂ§ÑÁêÜÊ≥®Ëß£ÔºàAnnotationÔºâ„ÄÇ‰Ω†ÂèØ‰ª•ÂØπËá™ÂÆö‰πâÊ≥®Ëß£ÔºåÂπ∂Ê≥®ÂÜåÁõ∏Â∫îÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®„ÄÇÂà∞ËøôÈáåÔºåÊàëÂÅáËÆæ‰Ω†Â∑≤ÁªèÁü•ÈÅì‰ªÄ‰πàÊòØÊ≥®Ëß£ÔºåÂπ∂‰∏îÁü•ÈÅìÊÄé‰πàÁî≥ÊòéÁöÑ‰∏Ä‰∏™Ê≥®Ëß£„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁÜüÊÇâÊ≥®Ëß£Ôºå‰Ω†ÂèØ‰ª•Âú®ËøôÂÆòÊñπÊñáÊ°£‰∏≠ÂæóÂà∞Êõ¥Â§ö‰ø°ÊÅØ„ÄÇÊ≥®Ëß£Â§ÑÁêÜÂô®Âú®Java 5ÂºÄÂßãÂ∞±Êúâ‰∫ÜÔºå‰ΩÜÊòØ‰ªéJava 6Ôºà2006Âπ¥12ÊúàÂèëÂ∏ÉÔºâÂºÄÂßãÊâçÊúâÂèØÁî®ÁöÑAPI„ÄÇËøá‰∫Ü‰∏Ä‰∫õÊó∂Èó¥ÔºåJava‰∏ñÁïåÊâçÊÑèËØÜÂà∞Ê≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂº∫Â§ß‰ΩúÁî®ÔºåÊâÄ‰ª•ÂÆÉÂà∞ÊúÄËøëÂá†Âπ¥ÊâçÊµÅË°åËµ∑Êù•„ÄÇ\n‰∏Ä‰∏™Ê≥®Ëß£ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®Ôºå‰ª•Java‰ª£Á†ÅÔºàÊàñËÄÖÁºñËØëËøáÁöÑÂ≠óËäÇÁ†ÅÔºâ‰Ωú‰∏∫ËæìÂÖ•ÔºåÁîüÊàêÊñá‰ª∂ÔºàÈÄöÂ∏∏ÊòØ.javaÊñá‰ª∂Ôºâ‰Ωú‰∏∫ËæìÂá∫„ÄÇËøôÂÖ∑‰ΩìÁöÑÂê´‰πâ‰ªÄ‰πàÂë¢Ôºü‰Ω†ÂèØ‰ª•ÁîüÊàêJava‰ª£Á†ÅÔºÅËøô‰∫õÁîüÊàêÁöÑJava‰ª£Á†ÅÊòØÂú®ÁîüÊàêÁöÑ.javaÊñá‰ª∂‰∏≠ÔºåÊâÄ‰ª•‰Ω†‰∏çËÉΩ‰øÆÊîπÂ∑≤ÁªèÂ≠òÂú®ÁöÑJavaÁ±ªÔºå‰æãÂ¶ÇÂêëÂ∑≤ÊúâÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÊñπÊ≥ï„ÄÇËøô‰∫õÁîüÊàêÁöÑJavaÊñá‰ª∂Ôºå‰ºöÂêåÂÖ∂‰ªñÊôÆÈÄöÁöÑÊâãÂä®ÁºñÂÜôÁöÑJavaÊ∫ê‰ª£Á†Å‰∏ÄÊ†∑Ë¢´javacÁºñËØë„ÄÇ\nËôöÂ§ÑÁêÜÂô®AbstractProcessor Êàë‰ª¨È¶ñÂÖàÁúã‰∏Ä‰∏ãÂ§ÑÁêÜÂô®ÁöÑAPI„ÄÇÊØè‰∏Ä‰∏™Â§ÑÁêÜÂô®ÈÉΩÊòØÁªßÊâø‰∫éAbstractProcessorÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ">
<title></title>

<link rel='canonical' href='http://localhost:1313/android/annotation/annotation-processing/'>

<link rel="stylesheet" href="/scss/style.min.d0a16b8285afbefdc07c79fbf6282161f02e29094d9cc49a298d4e2016d2afc7.css"><meta property='og:title' content="">
<meta property='og:description' content="[ËØë]JavaÊ≥®Ëß£Â§ÑÁêÜÂô® ÁøªËØëÂèÇËÄÉÔºöJavaÊ≥®Ëß£Â§ÑÁêÜÂô®\nÂéüÊñá\nÂú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂ∞ÜÈòêËø∞ÊÄéÊ†∑ÂÜô‰∏Ä‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®(Annotation Processor)„ÄÇÂú®ËøôÁØáÊïôÁ®ã‰∏≠ÔºåÈ¶ñÂÖàÔºåÊàëÂ∞ÜÂêëÊÇ®Ëß£Èáä‰ªÄ‰πàÊòØÊ≥®Ëß£Âô®Ôºå‰Ω†ÂèØ‰ª•Âà©Áî®Ëøô‰∏™Âº∫Â§ßÁöÑÂ∑•ÂÖ∑ÂÅö‰ªÄ‰πà‰ª•Âèä‰∏çËÉΩÂÅö‰ªÄ‰πàÔºõÁÑ∂ÂêéÔºåÊàëÂ∞Ü‰∏ÄÊ≠•‰∏ÄÊ≠•ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊ≥®Ëß£Âô®„ÄÇ\n‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµ Âú®ÂºÄÂßã‰πãÂâçÔºåÊàë‰ª¨È¶ñÂÖàÁî≥Êòé‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÈóÆÈ¢òÔºöÊàë‰ª¨Âπ∂‰∏çËÆ®ËÆ∫ÈÇ£‰∫õÂú®ËøêË°åÊó∂ÔºàRuntimeÔºâÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂ËøêË°åÂ§ÑÁêÜÁöÑÊ≥®Ëß£ÔºåËÄåÊòØËÆ®ËÆ∫Âú®ÁºñËØëÊó∂ÔºàCompile timeÔºâÂ§ÑÁêÜÁöÑÊ≥®Ëß£„ÄÇ\nÊ≥®Ëß£Â§ÑÁêÜÂô®ÔºàAnnotation ProcessorÔºâÊòØjavacÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑ÔºåÂÆÉÁî®Êù•Âú®ÁºñËØëÊó∂Êâ´ÊèèÂíåÂ§ÑÁêÜÊ≥®Ëß£ÔºàAnnotationÔºâ„ÄÇ‰Ω†ÂèØ‰ª•ÂØπËá™ÂÆö‰πâÊ≥®Ëß£ÔºåÂπ∂Ê≥®ÂÜåÁõ∏Â∫îÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®„ÄÇÂà∞ËøôÈáåÔºåÊàëÂÅáËÆæ‰Ω†Â∑≤ÁªèÁü•ÈÅì‰ªÄ‰πàÊòØÊ≥®Ëß£ÔºåÂπ∂‰∏îÁü•ÈÅìÊÄé‰πàÁî≥ÊòéÁöÑ‰∏Ä‰∏™Ê≥®Ëß£„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁÜüÊÇâÊ≥®Ëß£Ôºå‰Ω†ÂèØ‰ª•Âú®ËøôÂÆòÊñπÊñáÊ°£‰∏≠ÂæóÂà∞Êõ¥Â§ö‰ø°ÊÅØ„ÄÇÊ≥®Ëß£Â§ÑÁêÜÂô®Âú®Java 5ÂºÄÂßãÂ∞±Êúâ‰∫ÜÔºå‰ΩÜÊòØ‰ªéJava 6Ôºà2006Âπ¥12ÊúàÂèëÂ∏ÉÔºâÂºÄÂßãÊâçÊúâÂèØÁî®ÁöÑAPI„ÄÇËøá‰∫Ü‰∏Ä‰∫õÊó∂Èó¥ÔºåJava‰∏ñÁïåÊâçÊÑèËØÜÂà∞Ê≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂº∫Â§ß‰ΩúÁî®ÔºåÊâÄ‰ª•ÂÆÉÂà∞ÊúÄËøëÂá†Âπ¥ÊâçÊµÅË°åËµ∑Êù•„ÄÇ\n‰∏Ä‰∏™Ê≥®Ëß£ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®Ôºå‰ª•Java‰ª£Á†ÅÔºàÊàñËÄÖÁºñËØëËøáÁöÑÂ≠óËäÇÁ†ÅÔºâ‰Ωú‰∏∫ËæìÂÖ•ÔºåÁîüÊàêÊñá‰ª∂ÔºàÈÄöÂ∏∏ÊòØ.javaÊñá‰ª∂Ôºâ‰Ωú‰∏∫ËæìÂá∫„ÄÇËøôÂÖ∑‰ΩìÁöÑÂê´‰πâ‰ªÄ‰πàÂë¢Ôºü‰Ω†ÂèØ‰ª•ÁîüÊàêJava‰ª£Á†ÅÔºÅËøô‰∫õÁîüÊàêÁöÑJava‰ª£Á†ÅÊòØÂú®ÁîüÊàêÁöÑ.javaÊñá‰ª∂‰∏≠ÔºåÊâÄ‰ª•‰Ω†‰∏çËÉΩ‰øÆÊîπÂ∑≤ÁªèÂ≠òÂú®ÁöÑJavaÁ±ªÔºå‰æãÂ¶ÇÂêëÂ∑≤ÊúâÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÊñπÊ≥ï„ÄÇËøô‰∫õÁîüÊàêÁöÑJavaÊñá‰ª∂Ôºå‰ºöÂêåÂÖ∂‰ªñÊôÆÈÄöÁöÑÊâãÂä®ÁºñÂÜôÁöÑJavaÊ∫ê‰ª£Á†Å‰∏ÄÊ†∑Ë¢´javacÁºñËØë„ÄÇ\nËôöÂ§ÑÁêÜÂô®AbstractProcessor Êàë‰ª¨È¶ñÂÖàÁúã‰∏Ä‰∏ãÂ§ÑÁêÜÂô®ÁöÑAPI„ÄÇÊØè‰∏Ä‰∏™Â§ÑÁêÜÂô®ÈÉΩÊòØÁªßÊâø‰∫éAbstractProcessorÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ">
<meta property='og:url' content='http://localhost:1313/android/annotation/annotation-processing/'>
<meta property='og:site_name' content='Malinkang&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Android' />
<meta name="twitter:title" content="">
<meta name="twitter:description" content="[ËØë]JavaÊ≥®Ëß£Â§ÑÁêÜÂô® ÁøªËØëÂèÇËÄÉÔºöJavaÊ≥®Ëß£Â§ÑÁêÜÂô®\nÂéüÊñá\nÂú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂ∞ÜÈòêËø∞ÊÄéÊ†∑ÂÜô‰∏Ä‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®(Annotation Processor)„ÄÇÂú®ËøôÁØáÊïôÁ®ã‰∏≠ÔºåÈ¶ñÂÖàÔºåÊàëÂ∞ÜÂêëÊÇ®Ëß£Èáä‰ªÄ‰πàÊòØÊ≥®Ëß£Âô®Ôºå‰Ω†ÂèØ‰ª•Âà©Áî®Ëøô‰∏™Âº∫Â§ßÁöÑÂ∑•ÂÖ∑ÂÅö‰ªÄ‰πà‰ª•Âèä‰∏çËÉΩÂÅö‰ªÄ‰πàÔºõÁÑ∂ÂêéÔºåÊàëÂ∞Ü‰∏ÄÊ≠•‰∏ÄÊ≠•ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊ≥®Ëß£Âô®„ÄÇ\n‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµ Âú®ÂºÄÂßã‰πãÂâçÔºåÊàë‰ª¨È¶ñÂÖàÁî≥Êòé‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÈóÆÈ¢òÔºöÊàë‰ª¨Âπ∂‰∏çËÆ®ËÆ∫ÈÇ£‰∫õÂú®ËøêË°åÊó∂ÔºàRuntimeÔºâÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂ËøêË°åÂ§ÑÁêÜÁöÑÊ≥®Ëß£ÔºåËÄåÊòØËÆ®ËÆ∫Âú®ÁºñËØëÊó∂ÔºàCompile timeÔºâÂ§ÑÁêÜÁöÑÊ≥®Ëß£„ÄÇ\nÊ≥®Ëß£Â§ÑÁêÜÂô®ÔºàAnnotation ProcessorÔºâÊòØjavacÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑ÔºåÂÆÉÁî®Êù•Âú®ÁºñËØëÊó∂Êâ´ÊèèÂíåÂ§ÑÁêÜÊ≥®Ëß£ÔºàAnnotationÔºâ„ÄÇ‰Ω†ÂèØ‰ª•ÂØπËá™ÂÆö‰πâÊ≥®Ëß£ÔºåÂπ∂Ê≥®ÂÜåÁõ∏Â∫îÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®„ÄÇÂà∞ËøôÈáåÔºåÊàëÂÅáËÆæ‰Ω†Â∑≤ÁªèÁü•ÈÅì‰ªÄ‰πàÊòØÊ≥®Ëß£ÔºåÂπ∂‰∏îÁü•ÈÅìÊÄé‰πàÁî≥ÊòéÁöÑ‰∏Ä‰∏™Ê≥®Ëß£„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁÜüÊÇâÊ≥®Ëß£Ôºå‰Ω†ÂèØ‰ª•Âú®ËøôÂÆòÊñπÊñáÊ°£‰∏≠ÂæóÂà∞Êõ¥Â§ö‰ø°ÊÅØ„ÄÇÊ≥®Ëß£Â§ÑÁêÜÂô®Âú®Java 5ÂºÄÂßãÂ∞±Êúâ‰∫ÜÔºå‰ΩÜÊòØ‰ªéJava 6Ôºà2006Âπ¥12ÊúàÂèëÂ∏ÉÔºâÂºÄÂßãÊâçÊúâÂèØÁî®ÁöÑAPI„ÄÇËøá‰∫Ü‰∏Ä‰∫õÊó∂Èó¥ÔºåJava‰∏ñÁïåÊâçÊÑèËØÜÂà∞Ê≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂº∫Â§ß‰ΩúÁî®ÔºåÊâÄ‰ª•ÂÆÉÂà∞ÊúÄËøëÂá†Âπ¥ÊâçÊµÅË°åËµ∑Êù•„ÄÇ\n‰∏Ä‰∏™Ê≥®Ëß£ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®Ôºå‰ª•Java‰ª£Á†ÅÔºàÊàñËÄÖÁºñËØëËøáÁöÑÂ≠óËäÇÁ†ÅÔºâ‰Ωú‰∏∫ËæìÂÖ•ÔºåÁîüÊàêÊñá‰ª∂ÔºàÈÄöÂ∏∏ÊòØ.javaÊñá‰ª∂Ôºâ‰Ωú‰∏∫ËæìÂá∫„ÄÇËøôÂÖ∑‰ΩìÁöÑÂê´‰πâ‰ªÄ‰πàÂë¢Ôºü‰Ω†ÂèØ‰ª•ÁîüÊàêJava‰ª£Á†ÅÔºÅËøô‰∫õÁîüÊàêÁöÑJava‰ª£Á†ÅÊòØÂú®ÁîüÊàêÁöÑ.javaÊñá‰ª∂‰∏≠ÔºåÊâÄ‰ª•‰Ω†‰∏çËÉΩ‰øÆÊîπÂ∑≤ÁªèÂ≠òÂú®ÁöÑJavaÁ±ªÔºå‰æãÂ¶ÇÂêëÂ∑≤ÊúâÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÊñπÊ≥ï„ÄÇËøô‰∫õÁîüÊàêÁöÑJavaÊñá‰ª∂Ôºå‰ºöÂêåÂÖ∂‰ªñÊôÆÈÄöÁöÑÊâãÂä®ÁºñÂÜôÁöÑJavaÊ∫ê‰ª£Á†Å‰∏ÄÊ†∑Ë¢´javacÁºñËØë„ÄÇ\nËôöÂ§ÑÁêÜÂô®AbstractProcessor Êàë‰ª¨È¶ñÂÖàÁúã‰∏Ä‰∏ãÂ§ÑÁêÜÂô®ÁöÑAPI„ÄÇÊØè‰∏Ä‰∏™Â§ÑÁêÜÂô®ÈÉΩÊòØÁªßÊâø‰∫éAbstractProcessorÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ">
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-G84J9N38RL"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-G84J9N38RL');
        }
      </script><style>
    :root {
        --sys-font-family: "LXGW WenKai TC";
        --zh-font-family: "LXGW WenKai TC";
        --base-font-family: "LXGW WenKai TC";
        --code-font-family: "LXGW WenKai TC";
        --article-font-family: "LXGW WenKai TC";
    }
</style>

<script>
    (function () {
        const customFont = document.createElement("link");
        customFont.href = "https://fonts.googleapis.com/css2?family=LXGW+WenKai+Mono+TC&family=LXGW+WenKai+TC&display=swap";
        customFont.type = "text/css";
        customFont.rel = "stylesheet";
        document.head.appendChild(customFont);
    })();
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/images/avatar_hu15583006483879718621.jpeg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Malinkang&#39;s Blog</a></h1>
            <h2 class="site-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/27440979'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.douban.com/people/malinkang/'
                        target="_blank"
                        title="Douban"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-douban"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h16" /><path d="M5 4h14" /><path d="M8 8h8a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-2a2 2 0 0 1 2 -2z" /><path d="M16 14l-2 6" /><path d="M8 17l1 3" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/malinkang'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.instagram.com/malinkang'
                        target="_blank"
                        title="Instagram"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-instagram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z" /><path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M16.5 7.5l0 .01" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.strava.com/athletes/20840511'
                        target="_blank"
                        title="Strava"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-strava"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 13l-5 -10l-5 10m6 0l4 8l4 -8" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://t.me/malinkanglife'
                        target="_blank"
                        title="Telegram"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://x.com/malinkang'
                        target="_blank"
                        title="X"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/pages/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/pages/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/pages/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Â•ΩÂèã</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµ">‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµ</a></li>
    <li><a href="#ËôöÂ§ÑÁêÜÂô®abstractprocessor">ËôöÂ§ÑÁêÜÂô®<code>AbstractProcessor</code></a></li>
    <li><a href="#Ê≥®ÂÜå‰Ω†ÁöÑÂ§ÑÁêÜÂô®">Ê≥®ÂÜå‰Ω†ÁöÑÂ§ÑÁêÜÂô®</a></li>
    <li><a href="#‰æãÂ≠êÂ∑•ÂéÇÊ®°Âºè">‰æãÂ≠êÔºöÂ∑•ÂéÇÊ®°Âºè</a>
      <ol>
        <li><a href="#factoryÊ≥®Ëß£"><code>@Factory</code>Ê≥®Ëß£</a></li>
        <li><a href="#Â§ÑÁêÜÂô®">Â§ÑÁêÜÂô®</a></li>
        <li><a href="#elementsÂíåtypemirrors">ElementsÂíåTypeMirrors</a></li>
        <li><a href="#ÊêúÁ¥¢factoryÊ≥®Ëß£-a-idfactorya">ÊêúÁ¥¢@FactoryÊ≥®Ëß£ <a id="factory"></a></a></li>
        <li><a href="#ÈîôËØØÂ§ÑÁêÜ">ÈîôËØØÂ§ÑÁêÜ</a></li>
        <li><a href="#Êï∞ÊçÆÊ®°Âûã">Êï∞ÊçÆÊ®°Âûã</a></li>
        <li><a href="#ÂåπÈÖçÊ†áÂáÜ">ÂåπÈÖçÊ†áÂáÜ</a></li>
        <li><a href="#ÁªÑÂêàË¢´Ê≥®Ëß£ÁöÑÁ±ª">ÁªÑÂêàË¢´Ê≥®Ëß£ÁöÑÁ±ª</a></li>
        <li><a href="#‰ª£Á†ÅÁîüÊàê">‰ª£Á†ÅÁîüÊàê</a></li>
        <li><a href="#Â§ÑÁêÜÂæ™ÁéØ">Â§ÑÁêÜÂæ™ÁéØ</a></li>
        <li><a href="#ÂàÜÁ¶ªÂ§ÑÁêÜÂô®ÂíåÊ≥®Ëß£">ÂàÜÁ¶ªÂ§ÑÁêÜÂô®ÂíåÊ≥®Ëß£</a></li>
        <li><a href="#ÁîüÊàêÁöÑÁ±ªÁöÑÂÆû‰æãÂåñ">ÁîüÊàêÁöÑÁ±ªÁöÑÂÆû‰æãÂåñ</a></li>
      </ol>
    </li>
    <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a>
      <ol>
        <li><a href="#heading"></a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/android/annotation/annotation-processing/"></a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    11 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="ËØëjavaÊ≥®Ëß£Â§ÑÁêÜÂô®">[ËØë]JavaÊ≥®Ëß£Â§ÑÁêÜÂô®
</h1><p>ÁøªËØëÂèÇËÄÉÔºö<a class="link" href="https://www.race604.com/annotation-processing/"  target="_blank" rel="noopener"
    >JavaÊ≥®Ëß£Â§ÑÁêÜÂô®</a></p>
<p><a class="link" href="http://hannesdorfmann.com/annotation-processing/annotationprocessing101"  target="_blank" rel="noopener"
    >ÂéüÊñá</a></p>
<p>Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂ∞ÜÈòêËø∞ÊÄéÊ†∑ÂÜô‰∏Ä‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®(Annotation Processor)„ÄÇÂú®ËøôÁØáÊïôÁ®ã‰∏≠ÔºåÈ¶ñÂÖàÔºåÊàëÂ∞ÜÂêëÊÇ®Ëß£Èáä‰ªÄ‰πàÊòØÊ≥®Ëß£Âô®Ôºå‰Ω†ÂèØ‰ª•Âà©Áî®Ëøô‰∏™Âº∫Â§ßÁöÑÂ∑•ÂÖ∑ÂÅö‰ªÄ‰πà‰ª•Âèä‰∏çËÉΩÂÅö‰ªÄ‰πàÔºõÁÑ∂ÂêéÔºåÊàëÂ∞Ü‰∏ÄÊ≠•‰∏ÄÊ≠•ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊ≥®Ëß£Âô®„ÄÇ</p>
<h2 id="‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµ">‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµ
</h2><p>Âú®ÂºÄÂßã‰πãÂâçÔºåÊàë‰ª¨È¶ñÂÖàÁî≥Êòé‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÈóÆÈ¢òÔºöÊàë‰ª¨Âπ∂‰∏çËÆ®ËÆ∫ÈÇ£‰∫õÂú®ËøêË°åÊó∂ÔºàRuntimeÔºâÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂ËøêË°åÂ§ÑÁêÜÁöÑÊ≥®Ëß£ÔºåËÄåÊòØËÆ®ËÆ∫Âú®ÁºñËØëÊó∂ÔºàCompile timeÔºâÂ§ÑÁêÜÁöÑÊ≥®Ëß£„ÄÇ</p>
<p>Ê≥®Ëß£Â§ÑÁêÜÂô®ÔºàAnnotation ProcessorÔºâÊòØ<strong>javac</strong>ÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑ÔºåÂÆÉÁî®Êù•Âú®ÁºñËØëÊó∂Êâ´ÊèèÂíåÂ§ÑÁêÜÊ≥®Ëß£ÔºàAnnotationÔºâ„ÄÇ‰Ω†ÂèØ‰ª•ÂØπËá™ÂÆö‰πâÊ≥®Ëß£ÔºåÂπ∂Ê≥®ÂÜåÁõ∏Â∫îÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®„ÄÇÂà∞ËøôÈáåÔºåÊàëÂÅáËÆæ‰Ω†Â∑≤ÁªèÁü•ÈÅì‰ªÄ‰πàÊòØÊ≥®Ëß£ÔºåÂπ∂‰∏îÁü•ÈÅìÊÄé‰πàÁî≥ÊòéÁöÑ‰∏Ä‰∏™Ê≥®Ëß£„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁÜüÊÇâÊ≥®Ëß£Ôºå‰Ω†ÂèØ‰ª•Âú®Ëøô<a class="link" href="http://docs.oracle.com/javase/tutorial/java/annotations/index.html"  target="_blank" rel="noopener"
    >ÂÆòÊñπÊñáÊ°£</a>‰∏≠ÂæóÂà∞Êõ¥Â§ö‰ø°ÊÅØ„ÄÇÊ≥®Ëß£Â§ÑÁêÜÂô®Âú®Java 5ÂºÄÂßãÂ∞±Êúâ‰∫ÜÔºå‰ΩÜÊòØ‰ªéJava 6Ôºà2006Âπ¥12ÊúàÂèëÂ∏ÉÔºâÂºÄÂßãÊâçÊúâÂèØÁî®ÁöÑAPI„ÄÇËøá‰∫Ü‰∏Ä‰∫õÊó∂Èó¥ÔºåJava‰∏ñÁïåÊâçÊÑèËØÜÂà∞Ê≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂº∫Â§ß‰ΩúÁî®ÔºåÊâÄ‰ª•ÂÆÉÂà∞ÊúÄËøëÂá†Âπ¥ÊâçÊµÅË°åËµ∑Êù•„ÄÇ</p>
<p>‰∏Ä‰∏™Ê≥®Ëß£ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®Ôºå‰ª•Java‰ª£Á†ÅÔºàÊàñËÄÖÁºñËØëËøáÁöÑÂ≠óËäÇÁ†ÅÔºâ‰Ωú‰∏∫ËæìÂÖ•ÔºåÁîüÊàêÊñá‰ª∂ÔºàÈÄöÂ∏∏ÊòØ<code>.java</code>Êñá‰ª∂Ôºâ‰Ωú‰∏∫ËæìÂá∫„ÄÇËøôÂÖ∑‰ΩìÁöÑÂê´‰πâ‰ªÄ‰πàÂë¢Ôºü‰Ω†ÂèØ‰ª•ÁîüÊàêJava‰ª£Á†ÅÔºÅËøô‰∫õÁîüÊàêÁöÑJava‰ª£Á†ÅÊòØÂú®ÁîüÊàêÁöÑ.javaÊñá‰ª∂‰∏≠ÔºåÊâÄ‰ª•‰Ω†‰∏çËÉΩ‰øÆÊîπÂ∑≤ÁªèÂ≠òÂú®ÁöÑJavaÁ±ªÔºå‰æãÂ¶ÇÂêëÂ∑≤ÊúâÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÊñπÊ≥ï„ÄÇËøô‰∫õÁîüÊàêÁöÑJavaÊñá‰ª∂Ôºå‰ºöÂêåÂÖ∂‰ªñÊôÆÈÄöÁöÑÊâãÂä®ÁºñÂÜôÁöÑJavaÊ∫ê‰ª£Á†Å‰∏ÄÊ†∑Ë¢´<strong>javac</strong>ÁºñËØë„ÄÇ</p>
<h2 id="ËôöÂ§ÑÁêÜÂô®abstractprocessor">ËôöÂ§ÑÁêÜÂô®<code>AbstractProcessor</code>
</h2><p>Êàë‰ª¨È¶ñÂÖàÁúã‰∏Ä‰∏ãÂ§ÑÁêÜÂô®ÁöÑAPI„ÄÇÊØè‰∏Ä‰∏™Â§ÑÁêÜÂô®ÈÉΩÊòØÁªßÊâø‰∫é<code>AbstractProcessor</code>ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyProcessor</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractProcessor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="n">ProcessingEnvironment</span><span class="w"> </span><span class="n">env</span><span class="p">){</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annoations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getSupportedAnnotationTypes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SourceVersion</span><span class="w"> </span><span class="nf">getSupportedSourceVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>init(ProcessingEnvironment env)</code>: ÊØè‰∏Ä‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®Á±ªÈÉΩ<strong>ÂøÖÈ°ªÊúâ‰∏Ä‰∏™Á©∫ÁöÑÊûÑÈÄ†ÂáΩÊï∞</strong>„ÄÇÁÑ∂ËÄåÔºåËøôÈáåÊúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑ<code>init()</code>ÊñπÊ≥ïÔºåÂÆÉ‰ºöË¢´Ê≥®Ëß£Â§ÑÁêÜÂ∑•ÂÖ∑Ë∞ÉÁî®ÔºåÂπ∂ËæìÂÖ•<code>ProcessingEnviroment</code>ÂèÇÊï∞„ÄÇ<code>ProcessingEnviroment</code>Êèê‰æõÂæàÂ§öÊúâÁî®ÁöÑÂ∑•ÂÖ∑Á±ª<code>Elements</code>, <code>Types</code>Âíå<code>Filer</code>„ÄÇÂêéÈù¢Êàë‰ª¨Â∞ÜÁúãÂà∞ËØ¶ÁªÜÁöÑÂÜÖÂÆπ„ÄÇ</li>
<li><code>process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment env)</code>: ËøôÁõ∏ÂΩì‰∫éÊØè‰∏™Â§ÑÁêÜÂô®ÁöÑ‰∏ªÂáΩÊï∞<code>main()</code>„ÄÇ‰Ω†Âú®ËøôÈáåÂÜô‰Ω†ÁöÑÊâ´Êèè„ÄÅËØÑ‰º∞ÂíåÂ§ÑÁêÜÊ≥®Ëß£ÁöÑ‰ª£Á†ÅÔºå‰ª•ÂèäÁîüÊàêJavaÊñá‰ª∂„ÄÇËæìÂÖ•ÂèÇÊï∞<code>RoundEnviroment</code>ÔºåÂèØ‰ª•ËÆ©‰Ω†Êü•ËØ¢Âá∫ÂåÖÂê´ÁâπÂÆöÊ≥®Ëß£ÁöÑË¢´Ê≥®Ëß£ÂÖÉÁ¥†„ÄÇÂêéÈù¢Êàë‰ª¨Â∞ÜÁúãÂà∞ËØ¶ÁªÜÁöÑÂÜÖÂÆπ„ÄÇ</li>
<li><code>getSupportedAnnotationTypes()</code>: ËøôÈáå‰Ω†ÂøÖÈ°ªÊåáÂÆöÔºåËøô‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®ÊòØÊ≥®ÂÜåÁªôÂì™‰∏™Ê≥®Ëß£ÁöÑ„ÄÇÊ≥®ÊÑèÔºåÂÆÉÁöÑËøîÂõûÂÄºÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÈõÜÂêàÔºåÂåÖÂê´Êú¨Â§ÑÁêÜÂô®ÊÉ≥Ë¶ÅÂ§ÑÁêÜÁöÑÊ≥®Ëß£Á±ªÂûãÁöÑÂêàÊ≥ïÂÖ®Áß∞„ÄÇÊç¢Âè•ËØùËØ¥Ôºå‰Ω†Âú®ËøôÈáåÂÆö‰πâ‰Ω†ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®Ê≥®ÂÜåÂà∞Âì™‰∫õÊ≥®Ëß£‰∏ä„ÄÇ</li>
<li><code>getSupportedSourceVersion()</code>: Áî®Êù•ÊåáÂÆö‰Ω†‰ΩøÁî®ÁöÑJavaÁâàÊú¨„ÄÇÈÄöÂ∏∏ËøôÈáåËøîÂõû<code>SourceVersion.latestSupported()</code>„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†ÊúâË∂≥Â§üÁöÑÁêÜÁî±Âè™ÊîØÊåÅJava 6ÁöÑËØùÔºå‰Ω†‰πüÂèØ‰ª•ËøîÂõû<code>SourceVersion.RELEASE_6</code>„ÄÇÊàëÊé®Ëçê‰Ω†‰ΩøÁî®ÂâçËÄÖ„ÄÇ</li>
</ul>
<h2 id="Ê≥®ÂÜå‰Ω†ÁöÑÂ§ÑÁêÜÂô®">Ê≥®ÂÜå‰Ω†ÁöÑÂ§ÑÁêÜÂô®
</h2><p>‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºå<em>ÊàëÊÄéÊ†∑Â∞ÜÂ§ÑÁêÜÂô®<code>MyProcessor</code>Ê≥®ÂÜåÂà∞javac‰∏≠</em>„ÄÇ‰Ω†ÂøÖÈ°ªÊèê‰æõ‰∏Ä‰∏™<code>.jar</code>Êñá‰ª∂„ÄÇÂ∞±ÂÉèÂÖ∂‰ªñ**.jar**Êñá‰ª∂‰∏ÄÊ†∑Ôºå‰Ω†ÊâìÂåÖ‰Ω†ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®Âà∞Ê≠§Êñá‰ª∂‰∏≠„ÄÇÂπ∂‰∏îÔºåÂú®‰Ω†ÁöÑjar‰∏≠Ôºå‰Ω†ÈúÄË¶ÅÊâìÂåÖ‰∏Ä‰∏™ÁâπÂÆöÁöÑÊñá‰ª∂<code>javax.annotation.processing.Processor</code>Âà∞<code>META-INF/services</code>Ë∑ØÂæÑ‰∏ã„ÄÇÊâÄ‰ª•Ôºå‰Ω†ÁöÑ.jarÊñá‰ª∂ÁúãËµ∑Êù•Â∞±ÂÉè‰∏ãÈù¢ËøôÊ†∑Ôºö</p>
<ul>
<li>MyProcessor.jar</li>
<li>
<ul>
<li>com</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>example</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>MyProcessor.class</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>META-INF</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>services</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>javax.annotation.processing.Processor</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ÊâìÂåÖËøõMyProcessor.jar‰∏≠ÁöÑ<code>javax.annotation.processing.Processor</code>ÁöÑÂÜÖÂÆπÊòØÔºåÊ≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂêàÊ≥ïÁöÑÂÖ®ÂêçÂàóË°®ÔºåÊØè‰∏Ä‰∏™ÂÖÉÁ¥†Êç¢Ë°åÂàÜÂâ≤Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">com.example.MyProcessor  
</span></span><span class="line"><span class="cl">com.foo.OtherProcessor  
</span></span><span class="line"><span class="cl">net.blabla.SpecialProcessor  
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êää<code>MyProcessor.jar</code>ÊîæÂà∞‰Ω†ÁöÑbuilpath‰∏≠Ôºåjavac‰ºöËá™Âä®Ê£ÄÊü•ÂíåËØªÂèñ<code>javax.annotation.processing.Processor</code>‰∏≠ÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îÊ≥®ÂÜå<code>MyProcessor</code>‰Ωú‰∏∫Ê≥®Ëß£Â§ÑÁêÜÂô®„ÄÇ</p>
<h2 id="‰æãÂ≠êÂ∑•ÂéÇÊ®°Âºè">‰æãÂ≠êÔºöÂ∑•ÂéÇÊ®°Âºè
</h2><p>ÊòØÊó∂ÂÄôÊù•ËØ¥‰∏Ä‰∏™ÂÆûÈôÖÁöÑ‰æãÂ≠ê‰∫Ü„ÄÇÊàë‰ª¨Â∞Ü‰ΩøÁî®<strong>maven</strong>Â∑•ÂÖ∑Êù•‰Ωú‰∏∫Êàë‰ª¨ÁöÑÁºñËØëÁ≥ªÁªüÂíå‰æùËµñÁÆ°ÁêÜÂ∑•ÂÖ∑„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁÜüÊÇâ<strong>maven</strong>Ôºå‰∏çÁî®ÊãÖÂøÉÔºåÂõ†‰∏∫maven‰∏çÊòØÂøÖÈ°ªÁöÑ„ÄÇÊú¨‰æãÂ≠êÁöÑÂÆåÊàê‰ª£Á†ÅÂú®<a class="link" href="https://github.com/sockeqwe/annotationprocessing101"  target="_blank" rel="noopener"
    >Github</a>‰∏ä„ÄÇ</p>
<p>ÂºÄÂßã‰πãÂâçÔºåÊàëÂøÖÈ°ªËØ¥ÔºåË¶Å‰∏∫Ëøô‰∏™ÊïôÁ®ãÊâæÂà∞‰∏Ä‰∏™ÈúÄË¶ÅÁî®Ê≥®Ëß£Â§ÑÁêÜÂô®Ëß£ÂÜ≥ÁöÑÁÆÄÂçïÈóÆÈ¢òÔºåÂÆûÂú®Âπ∂‰∏çÂÆπÊòì„ÄÇËøôÈáåÊàë‰ª¨Â∞ÜÂÆûÁé∞‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑÂ∑•ÂéÇÊ®°ÂºèÔºà‰∏çÊòØÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÔºâ„ÄÇËøôÂ∞ÜÂØπÊ≥®Ëß£Â§ÑÁêÜÂô®ÁöÑAPIÂÅö‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÊòéÁöÑ‰ªãÁªç„ÄÇÊâÄ‰ª•ÔºåËøô‰∏™ÈóÆÈ¢òÁöÑÁ®ãÂ∫èÂπ∂‰∏çÊòØÈÇ£‰πàÊúâÁî®Ôºå‰πü‰∏çÊòØ‰∏Ä‰∏™ÁúüÂÆû‰∏ñÁïåÁöÑ‰æãÂ≠ê„ÄÇÊâÄ‰ª•Âú®Ê≠§Áî≥ÊòéÔºå‰Ω†Â∞ÜÂ≠¶‰π†ÂÖ≥‰∫éÊ≥®Ëß£Â§ÑÁêÜËøáÁ®ãÁöÑÁõ∏ÂÖ≥ÂÜÖÂÆπÔºåËÄå‰∏çÊòØËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Êàë‰ª¨Â∞ÜË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢òÊòØÔºöÊàë‰ª¨Â∞ÜÂÆûÁé∞‰∏Ä‰∏™Êä´Ëê®Â∫óÔºåËøô‰∏™Êä´Ëê®Â∫óÁªôÊ∂àË¥πËÄÖÊèê‰æõ‰∏§ÁßçÊä´Ëê®Ôºà‚ÄúMargherita‚ÄùÂíå‚ÄúCalzone‚ÄùÔºâ‰ª•ÂèäÊèêÊãâÁ±≥ËãèÁîúÁÇπ(Tiramisu)„ÄÇ</p>
<p>Áúã‰∏Ä‰∏ãÂ¶Ç‰∏ãÁöÑ‰ª£Á†ÅÔºå‰∏çÈúÄË¶ÅÂÅö‰ªª‰ΩïÊõ¥Â§öÁöÑËß£ÈáäÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Meal</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MargheritaPizza</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">6</span><span class="p">.</span><span class="na">0f</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CalzonePizza</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">8</span><span class="p">.</span><span class="na">5f</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Tiramisu</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">4</span><span class="p">.</span><span class="na">5f</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏∫‰∫ÜÂú®Êàë‰ª¨ÁöÑÊä´Ëê®Â∫ó<code>PizzsStore</code>‰∏ãËÆ¢ÂçïÔºåÊ∂àË¥πËÄÖÈúÄË¶ÅËæìÂÖ•È§ê(Meal)ÁöÑÂêçÂ≠ó„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PizzaStore</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="nf">order</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">mealName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mealName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&#34;Name of the meal is null!&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&#34;Margherita&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">mealName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MargheritaPizza</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&#34;Calzone&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">mealName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CalzonePizza</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&#34;Tiramisu&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">mealName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Tiramisu</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&#34;Unknown meal &#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mealName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&#39;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PizzaStore</span><span class="w"> </span><span class="n">pizzaStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PizzaStore</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Meal</span><span class="w"> </span><span class="n">meal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizzaStore</span><span class="p">.</span><span class="na">order</span><span class="p">(</span><span class="n">readConsole</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Bill: $&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">meal</span><span class="p">.</span><span class="na">getPrice</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠£Â¶Ç‰Ω†ÊâÄËßÅÔºåÂú®<code>order()</code>ÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨ÊúâÂæàÂ§öÁöÑ<code>if</code>ËØ≠Âè•ÔºåÂπ∂‰∏îÂ¶ÇÊûúÊàë‰ª¨ÊØèÊ∑ªÂä†‰∏ÄÁßçÊñ∞ÁöÑÊä´Ëê®ÔºåÊàë‰ª¨ÈÉΩË¶ÅÊ∑ªÂä†‰∏ÄÊù°Êñ∞ÁöÑ<code>if</code>ËØ≠Âè•„ÄÇ‰ΩÜÊòØÁ≠â‰∏Ä‰∏ãÔºå‰ΩøÁî®Ê≥®Ëß£Â§ÑÁêÜÂíåÂ∑•ÂéÇÊ®°ÂºèÔºåÊàë‰ª¨ÂèØ‰ª•ËÆ©Ê≥®Ëß£Â§ÑÁêÜÂô®Êù•Â∏ÆÊàë‰ª¨Ëá™Âä®ÁîüÊàêËøô‰∫õ<code>if</code>ËØ≠Âè•„ÄÇÂ¶ÇÊ≠§‰ª•Êù•ÔºåÊàë‰ª¨ÊúüÊúõÁöÑÊòØÂ¶Ç‰∏ãÁöÑ‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PizzaStore</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">MealFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MealFactory</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="nf">order</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">mealName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">factory</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">mealName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PizzaStore</span><span class="w"> </span><span class="n">pizzaStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PizzaStore</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Meal</span><span class="w"> </span><span class="n">meal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizzaStore</span><span class="p">.</span><span class="na">order</span><span class="p">(</span><span class="n">readConsole</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Bill: $&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">meal</span><span class="p">.</span><span class="na">getPrice</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>MealFactory</code>Â∫îËØ•ÊòØÂ¶Ç‰∏ãÁöÑÊ†∑Â≠êÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MealFactory</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&#34;id is null!&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&#34;Calzone&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CalzonePizza</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&#34;Tiramisu&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Tiramisu</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&#34;Margherita&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MargheritaPizza</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&#34;Unknown id = &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="factoryÊ≥®Ëß£"><code>@Factory</code>Ê≥®Ëß£
</h3><p>‰Ω†ËÉΩÁåúÂà∞‰πàÔºöÊàë‰ª¨ÊÉ≥Áî®Ê≥®Ëß£Â§ÑÁêÜÂô®Ëá™Âä®ÁîüÊàê<code>MealFactory</code>„ÄÇÊõ¥‰∏ÄËà¨ÁöÑËØ¥ÔºåÊàë‰ª¨Â∞ÜÊÉ≥Ë¶ÅÊèê‰æõ‰∏Ä‰∏™Ê≥®Ëß£Âíå‰∏Ä‰∏™Â§ÑÁêÜÂô®Êù•ÁîüÊàêÂ∑•ÂéÇÁ±ª„ÄÇ</p>
<p>Êàë‰ª¨ÂÖàÊù•Áúã‰∏Ä‰∏ã<code>@Factory</code>Ê≥®Ëß£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Target</span><span class="p">(</span><span class="n">ElementType</span><span class="p">.</span><span class="na">TYPE</span><span class="p">)</span><span class="w"> </span><span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">CLASS</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">Factory</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * Â∑•ÂéÇÁöÑÂêçÂ≠ó
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">Class</span><span class="w"> </span><span class="nf">type</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * Áî®Êù•Ë°®Á§∫ÁîüÊàêÂì™‰∏™ÂØπË±°ÁöÑÂîØ‰∏Äid
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="nf">id</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊÉ≥Ê≥ïÊòØËøôÊ†∑ÁöÑÔºöÊàë‰ª¨Â∞Ü‰ΩøÁî®ÂêåÊ†∑ÁöÑ<code>type()</code>Ê≥®Ëß£ÈÇ£‰∫õÂ±û‰∫éÂêå‰∏Ä‰∏™Â∑•ÂéÇÁöÑÁ±ªÔºåÂπ∂‰∏îÁî®Ê≥®Ëß£ÁöÑ<code>id()</code>ÂÅö‰∏Ä‰∏™Êò†Â∞ÑÔºå‰æãÂ¶Ç‰ªé<code>&quot;Calzone&quot;</code>Êò†Â∞ÑÂà∞<code>&quot;ClzonePizza&quot;</code>Á±ª„ÄÇÊàë‰ª¨Â∫îÁî®<code>@Factory</code>Ê≥®Ëß£Âà∞Êàë‰ª¨ÁöÑÁ±ª‰∏≠ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Factory</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Margherita&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Meal</span><span class="p">.</span><span class="na">class</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MargheritaPizza</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">6f</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Factory</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Calzone&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Meal</span><span class="p">.</span><span class="na">class</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CalzonePizza</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">8</span><span class="p">.</span><span class="na">5f</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Factory</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Tiramisu&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Meal</span><span class="p">.</span><span class="na">class</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Tiramisu</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">4</span><span class="p">.</span><span class="na">5f</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂèØËÉΩ‰ºöÈóÆ‰Ω†Ëá™Â∑±ÔºåÊàë‰ª¨ÊòØÂê¶ÂèØ‰ª•Âè™Êää<code>@Factory</code>Ê≥®Ëß£Â∫îÁî®Âà∞Êàë‰ª¨ÁöÑ<code>Meal</code>Êé•Âè£‰∏äÔºüÁ≠îÊ°àÊòØÔºåÊ≥®Ëß£ÊòØ‰∏çËÉΩÁªßÊâøÁöÑ„ÄÇ‰∏Ä‰∏™Á±ª<code>class X</code>Ë¢´Ê≥®Ëß£ÔºåÂπ∂‰∏çÊÑèÂë≥ÁùÄÂÆÉÁöÑÂ≠êÁ±ª<code>class Y extends X</code>‰ºöËá™Âä®Ë¢´Ê≥®Ëß£„ÄÇÂú®Êàë‰ª¨ÂºÄÂßãÂÜôÂ§ÑÁêÜÂô®ÁöÑ‰ª£Á†Å‰πãÂâçÔºåÊàë‰ª¨ÂÖàËßÑÂÆöÂ¶Ç‰∏ã‰∏Ä‰∫õËßÑÂàôÔºö</p>
<ol>
<li>Âè™ÊúâÁ±ªÂèØ‰ª•Ë¢´<code>@Factory</code>Ê≥®Ëß£ÔºåÂõ†‰∏∫Êé•Âè£ÊàñËÄÖÊäΩË±°Á±ªÂπ∂‰∏çËÉΩÁî®<code>new</code>Êìç‰ΩúÂÆû‰æãÂåñÔºõ</li>
<li>Ë¢´<code>@Factory</code>Ê≥®Ëß£ÁöÑÁ±ªÔºåÂøÖÈ°ªËá≥Â∞ëÊèê‰æõ‰∏Ä‰∏™ÂÖ¨ÂºÄÁöÑÈªòËÆ§ÊûÑÈÄ†Âô®ÔºàÂç≥Ê≤°ÊúâÂèÇÊï∞ÁöÑÊûÑÈÄ†ÂáΩÊï∞Ôºâ„ÄÇÂê¶ËÄÖÊàë‰ª¨Ê≤°Ê≥ïÂÆû‰æãÂåñ‰∏Ä‰∏™ÂØπË±°„ÄÇ</li>
<li>Ë¢´<code>@Factory</code>Ê≥®Ëß£ÁöÑÁ±ªÂøÖÈ°ªÁõ¥Êé•ÊàñËÄÖÈó¥Êé•ÁöÑÁªßÊâø‰∫é<code>type()</code>ÊåáÂÆöÁöÑÁ±ªÂûãÔºõ</li>
<li>ÂÖ∑ÊúâÁõ∏ÂêåÁöÑ<code>type</code>ÁöÑÊ≥®Ëß£Á±ªÔºåÂ∞ÜË¢´ËÅöÂêàÂú®‰∏ÄËµ∑ÁîüÊàê‰∏Ä‰∏™Â∑•ÂéÇÁ±ª„ÄÇËøô‰∏™ÁîüÊàêÁöÑÁ±ª‰ΩøÁî®_Factory_ÂêéÁºÄÔºå‰æãÂ¶Ç<code>type = Meal.class</code>ÔºåÂ∞ÜÁîüÊàê<code>MealFactory</code>Â∑•ÂéÇÁ±ªÔºõ</li>
<li><code>id</code>Âè™ËÉΩÊòØStringÁ±ªÂûãÔºåÂπ∂‰∏îÂú®Âêå‰∏Ä‰∏™<code>type</code>ÁªÑ‰∏≠ÂøÖÈ°ªÂîØ‰∏Ä„ÄÇ</li>
</ol>
<h3 id="Â§ÑÁêÜÂô®">Â§ÑÁêÜÂô®
</h3><p>ÊàëÂ∞ÜÈÄöËøáÊ∑ªÂä†‰ª£Á†ÅÂíå‰∏ÄÊÆµËß£ÈáäÁöÑÊñπÊ≥ïÔºå‰∏ÄÊ≠•‰∏ÄÊ≠•ÁöÑÂºïÂØº‰Ω†Êù•ÊûÑÂª∫Êàë‰ª¨ÁöÑÂ§ÑÁêÜÂô®„ÄÇÁúÅÁï•Âè∑(<code>...</code>)Ë°®Á§∫ÁúÅÁï•ÈÇ£‰∫õÂ∑≤ÁªèËÆ®ËÆ∫ËøáÁöÑÊàñËÄÖÂ∞ÜÂú®ÂêéÈù¢ÁöÑÊ≠•È™§‰∏≠ËÆ®ËÆ∫ÁöÑ‰ª£Á†ÅÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜËÆ©Êàë‰ª¨ÁöÑ‰ª£Á†ÅÊúâÊõ¥Â•ΩÁöÑÂèØËØªÊÄß„ÄÇÊ≠£Â¶ÇÊàë‰ª¨ÂâçÈù¢ËØ¥ÁöÑÔºåÊàë‰ª¨ÂÆåÊï¥ÁöÑ‰ª£Á†ÅÂèØ‰ª•Âú®<a class="link" href="https://github.com/sockeqwe/annotationprocessing101"  target="_blank" rel="noopener"
    >Github</a>‰∏äÊâæÂà∞„ÄÇÂ•Ω‰∫ÜÔºåËÆ©Êàë‰ª¨Êù•Áúã‰∏Ä‰∏ãÊàë‰ª¨ÁöÑÂ§ÑÁêÜÂô®Á±ª<code>FactoryProcessor</code>ÁöÑÈ™®Êû∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@AutoService</span><span class="p">(</span><span class="n">Processor</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FactoryProcessor</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractProcessor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Types</span><span class="w"> </span><span class="n">typeUtils</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Elements</span><span class="w"> </span><span class="n">elementUtils</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Filer</span><span class="w"> </span><span class="n">filer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Messager</span><span class="w"> </span><span class="n">messager</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryGroupedClasses</span><span class="o">&gt;</span><span class="w"> </span><span class="n">factoryClasses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryGroupedClasses</span><span class="o">&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="n">ProcessingEnvironment</span><span class="w"> </span><span class="n">processingEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">super</span><span class="p">.</span><span class="na">init</span><span class="p">(</span><span class="n">processingEnv</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">typeUtils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">processingEnv</span><span class="p">.</span><span class="na">getTypeUtils</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">elementUtils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">processingEnv</span><span class="p">.</span><span class="na">getElementUtils</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">filer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">processingEnv</span><span class="p">.</span><span class="na">getFiler</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">messager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">processingEnv</span><span class="p">.</span><span class="na">getMessager</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getSupportedAnnotationTypes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotataions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">annotataions</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getCanonicalName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">annotataions</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">SourceVersion</span><span class="w"> </span><span class="nf">getSupportedSourceVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">SourceVersion</span><span class="p">.</span><span class="na">latestSupported</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÁúãÂà∞Âú®‰ª£Á†ÅÁöÑÁ¨¨‰∏ÄË°åÊòØ<code>@AutoService(Processor.class)</code>ÔºåËøôÊòØ‰ªÄ‰πàÔºüËøôÊòØ‰∏Ä‰∏™ÂÖ∂‰ªñÊ≥®Ëß£Â§ÑÁêÜÂô®‰∏≠ÂºïÂÖ•ÁöÑÊ≥®Ëß£„ÄÇ<code>AutoService</code>Ê≥®Ëß£Â§ÑÁêÜÂô®ÊòØGoogleÂºÄÂèëÁöÑÔºåÁî®Êù•ÁîüÊàê<code>META-INF/services/javax.annotation.processing.Processor</code>Êñá‰ª∂ÁöÑ„ÄÇÊòØÁöÑÔºå‰Ω†Ê≤°ÊúâÁúãÈîôÔºåÊàë‰ª¨ÂèØ‰ª•Âú®Ê≥®Ëß£Â§ÑÁêÜÂô®‰∏≠‰ΩøÁî®Ê≥®Ëß£„ÄÇÈùûÂ∏∏Êñπ‰æøÔºåÈöæÈÅì‰∏çÊòØ‰πàÔºüÂú®<code>getSupportedAnnotationTypes()</code>‰∏≠ÔºåÊàë‰ª¨ÊåáÂÆöÊú¨Â§ÑÁêÜÂô®Â∞ÜÂ§ÑÁêÜ<code>@Factory</code>Ê≥®Ëß£„ÄÇ</p>
<h3 id="elementsÂíåtypemirrors">ElementsÂíåTypeMirrors
</h3><p>Âú®<code>init()</code>‰∏≠Êàë‰ª¨Ëé∑ÂæóÂ¶Ç‰∏ãÂºïÁî®Ôºö</p>
<ul>
<li><strong>Elements</strong>Ôºö‰∏Ä‰∏™Áî®Êù•Â§ÑÁêÜ<code>Element</code>ÁöÑÂ∑•ÂÖ∑Á±ªÔºàÂêéÈù¢Â∞ÜÂÅöËØ¶ÁªÜËØ¥ÊòéÔºâÔºõ</li>
<li><strong>Types</strong>Ôºö‰∏Ä‰∏™Áî®Êù•Â§ÑÁêÜ<code>TypeMirror</code>ÁöÑÂ∑•ÂÖ∑Á±ªÔºàÂêéÈù¢Â∞ÜÂÅöËØ¶ÁªÜËØ¥ÊòéÔºâÔºõ</li>
<li><strong>Filer</strong>ÔºöÊ≠£Â¶ÇËøô‰∏™ÂêçÂ≠óÊâÄÁ§∫Ôºå‰ΩøÁî®Filer‰Ω†ÂèØ‰ª•ÂàõÂª∫Êñá‰ª∂„ÄÇ</li>
</ul>
<p>Âú®Ê≥®Ëß£Â§ÑÁêÜËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨Êâ´ÊèèÊâÄÊúâÁöÑJavaÊ∫êÊñá‰ª∂„ÄÇÊ∫ê‰ª£Á†ÅÁöÑÊØè‰∏Ä‰∏™ÈÉ®ÂàÜÈÉΩÊòØ‰∏Ä‰∏™ÁâπÂÆöÁ±ªÂûãÁöÑ<code>Element</code>„ÄÇÊç¢Âè•ËØùËØ¥Ôºö<code>Element</code>‰ª£Ë°®Á®ãÂ∫èÁöÑÂÖÉÁ¥†Ôºå‰æãÂ¶ÇÂåÖ„ÄÅÁ±ªÊàñËÄÖÊñπÊ≥ï„ÄÇÊØè‰∏™<code>Element</code>‰ª£Ë°®‰∏Ä‰∏™ÈùôÊÄÅÁöÑ„ÄÅËØ≠Ë®ÄÁ∫ßÂà´ÁöÑÊûÑ‰ª∂„ÄÇÂú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÊ≥®ÈáäÊù•ËØ¥ÊòéËøô‰∏™Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span><span class="w">    </span><span class="c1">// PackageElement</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Foo</span><span class="w"> </span><span class="p">{</span><span class="w">        </span><span class="c1">// TypeElement</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w">      </span><span class="c1">// VariableElement</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">other</span><span class="p">;</span><span class="w">  </span><span class="c1">// VariableElement</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w">    </span><span class="c1">// ExecuteableElement</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setA</span><span class="w"> </span><span class="p">(</span><span class="w">  </span><span class="c1">// ExecuteableElement</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                     </span><span class="kt">int</span><span class="w"> </span><span class="n">newA</span><span class="w">   </span><span class="c1">// VariableElement</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                     </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂøÖÈ°ªÊç¢‰∏™ËßíÂ∫¶Êù•ÁúãÊ∫ê‰ª£Á†ÅÔºåÂÆÉÂè™ÊòØÁªìÊûÑÂåñÁöÑÊñáÊú¨Ôºå‰ªñ‰∏çÊòØÂèØËøêË°åÁöÑ„ÄÇ‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°ÂÆÉÂ∞±ÂÉè‰Ω†Â∞ÜË¶ÅÂéªËß£ÊûêÁöÑXMLÊñá‰ª∂‰∏ÄÊ†∑ÔºàÊàñËÄÖÊòØÁºñËØëÂô®‰∏≠ÊäΩË±°ÁöÑËØ≠Ê≥ïÊ†ëÔºâ„ÄÇÂ∞±ÂÉèXMLËß£ÈáäÂô®‰∏ÄÊ†∑ÔºåÊúâ‰∏Ä‰∫õÁ±ª‰ººDOMÁöÑÂÖÉÁ¥†„ÄÇ‰Ω†ÂèØ‰ª•‰ªé‰∏Ä‰∏™ÂÖÉÁ¥†ÂØºËà™Âà∞ÂÆÉÁöÑÁà∂ÊàñËÄÖÂ≠êÂÖÉÁ¥†‰∏ä„ÄÇ</p>
<p>‰∏æ‰æãÊù•ËØ¥ÔºåÂÅáÂ¶Ç‰Ω†Êúâ‰∏Ä‰∏™‰ª£Ë°®<code>public class Foo</code>Á±ªÁöÑ<code>TypeElement</code>ÂÖÉÁ¥†Ôºå‰Ω†ÂèØ‰ª•ÈÅçÂéÜÂÆÉÁöÑÂ≠©Â≠êÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">TypeElement</span><span class="w"> </span><span class="n">fooClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">fooClass</span><span class="p">.</span><span class="na">getEnclosedElements</span><span class="p">()){</span><span class="w"> </span><span class="c1">// iterate over children  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Element</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getEnclosingElement</span><span class="p">();</span><span class="w">  </span><span class="c1">// parent == fooClass</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠£Â¶Ç‰Ω†ÊâÄËßÅÔºå<strong>Element</strong>‰ª£Ë°®ÁöÑÊòØÊ∫ê‰ª£Á†Å„ÄÇ<code>TypeElement</code>‰ª£Ë°®ÁöÑÊòØÊ∫ê‰ª£Á†Å‰∏≠ÁöÑÁ±ªÂûãÂÖÉÁ¥†Ôºå‰æãÂ¶ÇÁ±ª„ÄÇÁÑ∂ËÄåÔºå<code>TypeElement</code>Âπ∂‰∏çÂåÖÂê´Á±ªÊú¨Ë∫´ÁöÑ‰ø°ÊÅØ„ÄÇ‰Ω†ÂèØ‰ª•‰ªé<code>TypeElement</code>‰∏≠Ëé∑ÂèñÁ±ªÁöÑÂêçÂ≠óÔºå‰ΩÜÊòØ‰Ω†Ëé∑Âèñ‰∏çÂà∞Á±ªÁöÑ‰ø°ÊÅØÔºå‰æãÂ¶ÇÂÆÉÁöÑÁà∂Á±ª„ÄÇËøôÁßç‰ø°ÊÅØÈúÄË¶ÅÈÄöËøá<code>TypeMirror</code>Ëé∑Âèñ„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáË∞ÉÁî®<code>elements.asType()</code>Ëé∑ÂèñÂÖÉÁ¥†ÁöÑ<code>TypeMirror</code>„ÄÇ</p>
<h3 id="ÊêúÁ¥¢factoryÊ≥®Ëß£-a-idfactorya">ÊêúÁ¥¢@FactoryÊ≥®Ëß£ <a id="factory"></a>
</h3><p>Êàë‰ª¨Êù•‰∏ÄÊ≠•‰∏ÄÊ≠•ÂÆûÁé∞<code>process()</code>ÊñπÊ≥ï„ÄÇÈ¶ñÂÖàÔºåÊàë‰ª¨‰ªéÊêúÁ¥¢Ë¢´Ê≥®Ëß£‰∫Ü<code>@Factory</code>ÁöÑÁ±ªÂºÄÂßãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@AutoService</span><span class="p">(</span><span class="n">Processor</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FactoryProcessor</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractProcessor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Types</span><span class="w"> </span><span class="n">typeUtils</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Elements</span><span class="w"> </span><span class="n">elementUtils</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Filer</span><span class="w"> </span><span class="n">filer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Messager</span><span class="w"> </span><span class="n">messager</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryGroupedClasses</span><span class="o">&gt;</span><span class="w"> </span><span class="n">factoryClasses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryGroupedClasses</span><span class="o">&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÈÅçÂéÜÊâÄÊúâË¢´Ê≥®Ëß£‰∫Ü@FactoryÁöÑÂÖÉÁ¥†</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">annotatedElement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">.</span><span class="na">getElementsAnnotatedWith</span><span class="p">(</span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÂπ∂Ê≤°Êúâ‰ªÄ‰πàÈ´òÊ∑±ÁöÑÊäÄÊúØ„ÄÇ<code>roundEnv.getElementsAnnotatedWith(Factory.class))</code>ËøîÂõûÊâÄÊúâË¢´Ê≥®Ëß£‰∫Ü<code>@Factory</code>ÁöÑÂÖÉÁ¥†ÁöÑÂàóË°®„ÄÇ‰Ω†ÂèØËÉΩÂ∑≤ÁªèÊ≥®ÊÑèÂà∞ÔºåÊàë‰ª¨Âπ∂Ê≤°ÊúâËØ¥‚Äú<em>ÊâÄÊúâË¢´Ê≥®Ëß£‰∫Ü<code>@Factory</code>ÁöÑÁ±ªÁöÑÂàóË°®</em>‚ÄùÔºåÂõ†‰∏∫ÂÆÉÁúüÁöÑÊòØËøîÂõû<code>Element</code>ÁöÑÂàóË°®„ÄÇËØ∑ËÆ∞‰ΩèÔºö<code>Element</code>ÂèØ‰ª•ÊòØÁ±ª„ÄÅÊñπÊ≥ï„ÄÅÂèòÈáèÁ≠â„ÄÇÊâÄ‰ª•ÔºåÊé•‰∏ãÊù•ÔºåÊàë‰ª¨ÂøÖÈ°ªÊ£ÄÊü•Ëøô‰∫õ<code>Element</code>ÊòØÂê¶ÊòØ‰∏Ä‰∏™Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">annotatedElement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">.</span><span class="na">getElementsAnnotatedWith</span><span class="p">(</span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c1">// Ê£ÄÊü•Ë¢´Ê≥®Ëß£‰∏∫@FactoryÁöÑÂÖÉÁ¥†ÊòØÂê¶ÊòØ‰∏Ä‰∏™Á±ª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">annotatedElement</span><span class="p">.</span><span class="na">getKind</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ElementKind</span><span class="p">.</span><span class="na">CLASS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏∫‰ªÄ‰πàË¶ÅËøô‰πàÂÅöÔºüÊàë‰ª¨Ë¶ÅÁ°Æ‰øùÂè™ÊúâclassÂÖÉÁ¥†Ë¢´Êàë‰ª¨ÁöÑÂ§ÑÁêÜÂô®Â§ÑÁêÜ„ÄÇÂâçÈù¢Êàë‰ª¨Â∑≤ÁªèÂ≠¶‰π†Âà∞Á±ªÊòØÁî®<code>TypeElement</code>Ë°®Á§∫„ÄÇÊàë‰ª¨‰∏∫‰ªÄ‰πà‰∏çËøôÊ†∑Âà§Êñ≠Âë¢<code>if (! (annotatedElement instanceof TypeElement) )</code>ÔºüËøôÊòØÈîôËØØÁöÑÔºåÂõ†‰∏∫Êé•Âè£ÔºàinterfaceÔºâÁ±ªÂûã‰πüÊòØTypeElement„ÄÇÊâÄ‰ª•Âú®Ê≥®Ëß£Â§ÑÁêÜÂô®‰∏≠ÔºåÊàë‰ª¨Ë¶ÅÈÅøÂÖç‰ΩøÁî®<code>instanceof</code>ÔºåËÄåÊòØÈÖçÂêà<code>TypeMirror</code>‰ΩøÁî®<code>EmentKind</code>ÊàñËÄÖ<code>TypeKind</code>„ÄÇ</p>
<h3 id="ÈîôËØØÂ§ÑÁêÜ">ÈîôËØØÂ§ÑÁêÜ
</h3><p>Âú®<code>init()</code>‰∏≠ÔºåÊàë‰ª¨‰πüËé∑Âæó‰∫Ü‰∏Ä‰∏™<code>Messager</code>ÂØπË±°ÁöÑÂºïÁî®„ÄÇ<code>Messager</code>Êèê‰æõÁªôÊ≥®Ëß£Â§ÑÁêÜÂô®‰∏Ä‰∏™Êä•ÂëäÈîôËØØ„ÄÅË≠¶Âëä‰ª•ÂèäÊèêÁ§∫‰ø°ÊÅØÁöÑÈÄîÂæÑ„ÄÇÂÆÉ‰∏çÊòØÊ≥®Ëß£Â§ÑÁêÜÂô®ÂºÄÂèëËÄÖÁöÑÊó•ÂøóÂ∑•ÂÖ∑ÔºåËÄåÊòØÁî®Êù•ÂÜô‰∏Ä‰∫õ‰ø°ÊÅØÁªô‰ΩøÁî®Ê≠§Ê≥®Ëß£Âô®ÁöÑÁ¨¨‰∏âÊñπÂºÄÂèëËÄÖÁöÑ„ÄÇÂú®<a class="link" href="http://docs.oracle.com/javase/7/docs/api/javax/tools/Diagnostic.Kind.html"  target="_blank" rel="noopener"
    >ÂÆòÊñπÊñáÊ°£</a>‰∏≠ÊèèËø∞‰∫ÜÊ∂àÊÅØÁöÑ‰∏çÂêåÁ∫ßÂà´„ÄÇÈùûÂ∏∏ÈáçË¶ÅÁöÑÊòØ<a class="link" href="http://docs.oracle.com/javase/7/docs/api/javax/tools/Diagnostic.Kind.html#ERROR"  target="_blank" rel="noopener"
    ><code>Kind.ERROR</code></a>ÔºåÂõ†‰∏∫ËøôÁßçÁ±ªÂûãÁöÑ‰ø°ÊÅØÁî®Êù•Ë°®Á§∫Êàë‰ª¨ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®Â§ÑÁêÜÂ§±Ë¥•‰∫Ü„ÄÇÂæàÊúâÂèØËÉΩÊòØÁ¨¨‰∏âÊñπÂºÄÂèëËÄÖÈîôËØØÁöÑ‰ΩøÁî®‰∫Ü<code>@Factory</code>Ê≥®Ëß£Ôºà‰æãÂ¶ÇÔºåÁªôÊé•Âè£‰ΩøÁî®‰∫Ü@FactoryÊ≥®Ëß£Ôºâ„ÄÇËøô‰∏™Ê¶ÇÂøµÂíå‰º†ÁªüÁöÑJavaÂ∫îÁî®ÊúâÁÇπ‰∏ç‰∏ÄÊ†∑ÔºåÂú®‰º†ÁªüJavaÂ∫îÁî®‰∏≠Êàë‰ª¨ÂèØËÉΩÂ∞±ÊäõÂá∫‰∏Ä‰∏™ÂºÇÂ∏∏<code>Exception</code>„ÄÇÂ¶ÇÊûú‰Ω†Âú®<code>process()</code>‰∏≠ÊäõÂá∫‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåÈÇ£‰πàËøêË°åÊ≥®Ëß£Â§ÑÁêÜÂô®ÁöÑJVMÂ∞Ü‰ºöÂ¥©Ê∫ÉÔºàÂ∞±ÂÉèÂÖ∂‰ªñJavaÂ∫îÁî®‰∏ÄÊ†∑ÔºâÔºå‰ΩøÁî®Êàë‰ª¨Ê≥®Ëß£Â§ÑÁêÜÂô®FactoryProcessorÁ¨¨‰∏âÊñπÂºÄÂèëËÄÖÂ∞Ü‰ºö‰ªéjavac‰∏≠ÂæóÂà∞ÈùûÂ∏∏ÈöæÊáÇÁöÑÂá∫Èîô‰ø°ÊÅØÔºåÂõ†‰∏∫ÂÆÉÂåÖÂê´FactoryProcessorÁöÑÂ†ÜÊ†àË∑üË∏™ÔºàStacktaceÔºâ‰ø°ÊÅØ„ÄÇÂõ†Ê≠§ÔºåÊ≥®Ëß£Â§ÑÁêÜÂô®Â∞±Êúâ‰∏Ä‰∏™<code>Messager</code>Á±ªÔºåÂÆÉËÉΩÂ§üÊâìÂç∞ÈùûÂ∏∏‰ºòÁæéÁöÑÈîôËØØ‰ø°ÊÅØ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºå‰Ω†ËøòÂèØ‰ª•ËøûÊé•Âà∞Âá∫ÈîôÁöÑÂÖÉÁ¥†„ÄÇÂú®ÂÉèIntelliJËøôÁßçÁé∞‰ª£ÁöÑIDEÔºàÈõÜÊàêÂºÄÂèëÁéØÂ¢ÉÔºâ‰∏≠ÔºåÁ¨¨‰∏âÊñπÂºÄÂèëËÄÖÂèØ‰ª•Áõ¥Êé•ÁÇπÂáªÈîôËØØ‰ø°ÊÅØÔºåIDEÂ∞Ü‰ºöÁõ¥Êé•Ë∑≥ËΩ¨Âà∞Á¨¨‰∏âÊñπÂºÄÂèëËÄÖÈ°πÁõÆÁöÑÂá∫ÈîôÁöÑÊ∫êÊñá‰ª∂ÁöÑÁõ∏Â∫îÁöÑË°å„ÄÇ</p>
<p>Êàë‰ª¨ÈáçÊñ∞ÂõûÂà∞<code>process()</code>ÊñπÊ≥ïÁöÑÂÆûÁé∞„ÄÇÂ¶ÇÊûúÈÅáÂà∞‰∏Ä‰∏™ÈùûÁ±ªÁ±ªÂûãË¢´Ê≥®Ëß£<code>@Factory</code>ÔºåÊàë‰ª¨ÂèëÂá∫‰∏Ä‰∏™Âá∫Èîô‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">annotatedElement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">.</span><span class="na">getElementsAnnotatedWith</span><span class="p">(</span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c1">// Ê£ÄÊü•Ë¢´Ê≥®Ëß£‰∏∫@FactoryÁöÑÂÖÉÁ¥†ÊòØÂê¶ÊòØ‰∏Ä‰∏™Á±ª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">annotatedElement</span><span class="p">.</span><span class="na">getKind</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ElementKind</span><span class="p">.</span><span class="na">CLASS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">error</span><span class="p">(</span><span class="n">annotatedElement</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Only classes can be annotated with @%s&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// ÈÄÄÂá∫Â§ÑÁêÜ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">messager</span><span class="p">.</span><span class="na">printMessage</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Diagnostic</span><span class="p">.</span><span class="na">Kind</span><span class="p">.</span><span class="na">ERROR</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">e</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËÆ©MessagerÊòæÁ§∫Áõ∏ÂÖ≥Âá∫Èîô‰ø°ÊÅØÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØ<strong>Ê≥®Ëß£Â§ÑÁêÜÂô®Á®ãÂ∫èÂøÖÈ°ªÂÆåÊàêËøêË°åËÄå‰∏çÂ¥©Ê∫É</strong>ÔºåËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÂú®Ë∞ÉÁî®<code>error()</code>ÂêéÁõ¥Êé•<code>return</code>„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰∏çÁõ¥Êé•ËøîÂõûÔºå<code>process()</code>Â∞ÜÁªßÁª≠ËøêË°åÔºåÂõ†‰∏∫<code>messager.printMessage( Diagnostic.Kind.ERROR)</code>‰∏ç‰ºöÂÅúÊ≠¢Ê≠§ËøõÁ®ã„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÊàë‰ª¨Âú®ÊâìÂç∞ÈîôËØØ‰ø°ÊÅØ‰ª•Âêé‰∏çËøîÂõûÁöÑËØùÔºåÊàë‰ª¨ÂæàÂèØËÉΩÂ∞±‰ºöËøêË°åÂà∞‰∏Ä‰∏™_NullPointerException_Á≠â„ÄÇÂ∞±ÂÉèÊàë‰ª¨ÂâçÈù¢ËØ¥ÁöÑÔºåÂ¶ÇÊûúÊàë‰ª¨ÁªßÁª≠ËøêË°å<code>process()</code>ÔºåÈóÆÈ¢òÊòØÂ¶ÇÊûúÂú®<code>process()</code>‰∏≠ÊäõÂá∫‰∏Ä‰∏™Êú™Â§ÑÁêÜÁöÑÂºÇÂ∏∏ÔºåjavacÂ∞Ü‰ºöÊâìÂç∞Âá∫ÂÜÖÈÉ®ÁöÑ_NullPointerException_ÔºåËÄå‰∏çÊòØ<code>Messager</code>‰∏≠ÁöÑÈîôËØØ‰ø°ÊÅØ„ÄÇ</p>
<h3 id="Êï∞ÊçÆÊ®°Âûã">Êï∞ÊçÆÊ®°Âûã
</h3><p>Âú®ÁªßÁª≠Ê£ÄÊü•Ë¢´Ê≥®Ëß£@FractoryÁöÑÁ±ªÊòØÂê¶Êª°Ë∂≥Êàë‰ª¨‰∏äÈù¢ËØ¥ÁöÑ5Êù°ËßÑÂàô‰πãÂâçÔºåÊàë‰ª¨Â∞Ü‰ªãÁªç‰∏Ä‰∏™ËÆ©Êàë‰ª¨Êõ¥Êñπ‰æøÁªßÁª≠Â§ÑÁêÜÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÊúâÊó∂ÂÄôÔºå‰∏Ä‰∏™ÈóÆÈ¢òÊàñËÄÖËß£ÈáäÂô®ÁúãËµ∑Êù•Â¶ÇÊ≠§ÁÆÄÂçïÔºå‰ª•Ëá≥‰∫éÁ®ãÂ∫èÂëòÂÄæÂêë‰∫éÁî®‰∏Ä‰∏™Èù¢ÂêëËøáÁ®ãÊñπÂºèÊù•ÂÜôÊï¥‰∏™Â§ÑÁêÜÂô®„ÄÇ‰ΩÜÊòØ‰Ω†Áü•ÈÅìÂêóÔºü‰∏Ä‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®‰ªªÁÑ∂ÊòØ‰∏Ä‰∏™JavaÁ®ãÂ∫èÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶Å‰ΩøÁî®Èù¢ÂêëÂØπË±°ÁºñÁ®ã„ÄÅÊé•Âè£„ÄÅËÆæËÆ°Ê®°ÂºèÔºå‰ª•Âèä‰ªª‰Ωï‰Ω†Â∞ÜÂú®ÂÖ∂‰ªñÊôÆÈÄöJavaÁ®ãÂ∫è‰∏≠‰ΩøÁî®ÁöÑÊäÄÂ∑ß„ÄÇ</p>
<p>Êàë‰ª¨ÁöÑ<code>FactoryProcessor</code>ÈùûÂ∏∏ÁÆÄÂçïÔºå‰ΩÜÊòØÊàë‰ª¨‰ªçÁÑ∂ÊÉ≥Ë¶ÅÊää‰∏Ä‰∫õ‰ø°ÊÅØÂ≠ò‰∏∫ÂØπË±°„ÄÇÂú®<code>FactoryAnnotatedClass</code>‰∏≠ÔºåÊàë‰ª¨‰øùÂ≠òË¢´Ê≥®Ëß£Á±ªÁöÑÊï∞ÊçÆÔºåÊØîÂ¶ÇÂêàÊ≥ïÁöÑÁ±ªÁöÑÂêçÂ≠óÔºå‰ª•Âèä@FactoryÊ≥®Ëß£Êú¨Ë∫´ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØ„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨‰øùÂ≠ò<code>TypeElement</code>ÂíåÂ§ÑÁêÜËøáÁöÑ@FactoryÊ≥®Ëß£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FactoryAnnotatedClass</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">annotatedClassElement</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">qualifiedSuperClassName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">simpleTypeName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="nf">FactoryAnnotatedClass</span><span class="p">(</span><span class="n">TypeElement</span><span class="w"> </span><span class="n">classElement</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">annotatedClassElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classElement</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Factory</span><span class="w"> </span><span class="n">annotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classElement</span><span class="p">.</span><span class="na">getAnnotation</span><span class="p">(</span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annotation</span><span class="p">.</span><span class="na">id</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&#34;id() in @%s for class %s is null or empty! that&#39;s not allowed&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">(),</span><span class="w"> </span><span class="n">classElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">()));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Get the full QualifiedTypeName</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annotation</span><span class="p">.</span><span class="na">type</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">qualifiedSuperClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getCanonicalName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">simpleTypeName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">MirroredTypeException</span><span class="w"> </span><span class="n">mte</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">DeclaredType</span><span class="w"> </span><span class="n">classTypeMirror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">DeclaredType</span><span class="p">)</span><span class="w"> </span><span class="n">mte</span><span class="p">.</span><span class="na">getTypeMirror</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">classTypeElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">TypeElement</span><span class="p">)</span><span class="w"> </span><span class="n">classTypeMirror</span><span class="p">.</span><span class="na">asElement</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">qualifiedSuperClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classTypeElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">simpleTypeName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classTypeElement</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * Ëé∑ÂèñÂú®{@link Factory#id()}‰∏≠ÊåáÂÆöÁöÑid
</span></span></span><span class="line"><span class="cl"><span class="cm">   * return the id
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * Ëé∑ÂèñÂú®{@link Factory#type()}ÊåáÂÆöÁöÑÁ±ªÂûãÂêàÊ≥ïÂÖ®Âêç
</span></span></span><span class="line"><span class="cl"><span class="cm">   *
</span></span></span><span class="line"><span class="cl"><span class="cm">   * @return qualified name
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getQualifiedFactoryGroupName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">qualifiedSuperClassName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * Ëé∑ÂèñÂú® {@link Factory#type()} ‰∏≠ÊåáÂÆöÁöÑÁ±ªÂûãÁöÑÁÆÄÂçïÂêçÂ≠ó
</span></span></span><span class="line"><span class="cl"><span class="cm">   *
</span></span></span><span class="line"><span class="cl"><span class="cm">   * @return qualified name
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getSimpleFactoryGroupName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">simpleTypeName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * Ëé∑ÂèñË¢´@FactoryÊ≥®Ëß£ÁöÑÂéüÂßãÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">TypeElement</span><span class="w"> </span><span class="nf">getTypeElement</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">annotatedClassElement</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª£Á†ÅÂæàÂ§öÔºå‰ΩÜÊòØÊúÄÈáçË¶ÅÁöÑÈÉ®ÂàÜÊòØÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠„ÄÇÂÖ∂‰∏≠‰Ω†ËÉΩÊâæÂà∞Â¶Ç‰∏ãÁöÑ‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Factory</span><span class="w"> </span><span class="n">annotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classElement</span><span class="p">.</span><span class="na">getAnnotation</span><span class="p">(</span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annotation</span><span class="p">.</span><span class="na">id</span><span class="p">();</span><span class="w"> </span><span class="c1">// Read the id value (like &#34;Calzone&#34; or &#34;Tiramisu&#34;)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&#34;id() in @%s for class %s is null or empty! that&#39;s not allowed&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">(),</span><span class="w"> </span><span class="n">classElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">()));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÊàë‰ª¨Ëé∑Âèñ@FactoryÊ≥®Ëß£ÔºåÂπ∂‰∏îÊ£ÄÊü•idÊòØÂê¶‰∏∫Á©∫ÔºüÂ¶ÇÊûú‰∏∫Á©∫ÔºåÊàë‰ª¨Â∞ÜÊäõÂá∫<strong>IllegalArgumentException</strong>ÂºÇÂ∏∏„ÄÇ‰Ω†ÂèØËÉΩÊÑüÂà∞ÁñëÊÉëÁöÑÊòØÔºåÂâçÈù¢Êàë‰ª¨ËØ¥‰∫Ü‰∏çË¶ÅÊäõÂá∫ÂºÇÂ∏∏ÔºåËÄåÊòØ‰ΩøÁî®<code>Messager</code>„ÄÇËøôÈáå‰ªçÁÑ∂‰∏çÁüõÁõæ„ÄÇÊàë‰ª¨ÊäõÂá∫ÂÜÖÈÉ®ÁöÑÂºÇÂ∏∏Ôºå‰Ω†Âú®Â∞ÜÂú®ÂêéÈù¢ÁúãÂà∞‰ºöÂú®<code>process()</code>‰∏≠ÊçïËé∑Ëøô‰∏™ÂºÇÂ∏∏„ÄÇÊàëËøôÊ†∑ÂÅöÂá∫‰∫é‰∏Ä‰∏ã‰∏§‰∏™ÂéüÂõ†Ôºö</p>
<ol>
<li>ÊàëÊÉ≥Á§∫ÊÑèÊàë‰ª¨Â∫îËØ•ÂÉèÊôÆÈÄöÁöÑJavaÁ®ãÂ∫è‰∏ÄÊ†∑ÁºñÁ†Å„ÄÇÊäõÂá∫ÂíåÊçïËé∑ÂºÇÂ∏∏ÊòØÈùûÂ∏∏Â•ΩÁöÑJavaÁºñÁ®ãÂÆûË∑µÔºõ</li>
<li>Â¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂú®<code>FactoryAnnotatedClass</code>‰∏≠ÊâìÂç∞‰ø°ÊÅØÔºåÊàëÈúÄË¶Å‰πü‰º†ÂÖ•<code>Messager</code>ÂØπË±°ÔºåÂπ∂‰∏îÊàë‰ª¨Âú®<strong>ÈîôËØØÂ§ÑÁêÜ</strong>‰∏ÄËäÇ‰∏≠Â∑≤ÁªèÊèêÂà∞Ôºå‰∏∫‰∫ÜÊâìÂç∞<code>Messager</code>‰ø°ÊÅØÔºåÊàë‰ª¨ÂøÖÈ°ªÊàêÂäüÂÅúÊ≠¢Â§ÑÁêÜÂô®ËøêË°å„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰ΩøÁî®<code>Messager</code>ÊâìÂç∞‰∫ÜÈîôËØØ‰ø°ÊÅØÔºåÊàë‰ª¨ÊÄéÊ†∑ÂëäÁü•<code>process()</code>Âá∫Áé∞‰∫ÜÈîôËØØÂë¢ÔºüÊúÄÂÆπÊòìÔºåÂπ∂‰∏îÊàëËÆ§‰∏∫ÊúÄÁõ¥ËßÇÁöÑÊñπÂºèÂ∞±ÊòØÊäõÂá∫‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåÁÑ∂ÂêéËÆ©<code>process()</code>ÊçïËé∑‰πã„ÄÇ</li>
</ol>
<p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨Â∞ÜËé∑Âèñ<code>@Fractory</code>Ê≥®Ëß£‰∏≠ÁöÑ<code>type</code>ÊàêÂëò„ÄÇÊàë‰ª¨ÊØîËæÉÂÖ≥ÂøÉÁöÑÊòØÂêàÊ≥ïÁöÑÂÖ®ÂêçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annotation</span><span class="p">.</span><span class="na">type</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">qualifiedGroupClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getCanonicalName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">simpleFactoryGroupName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clazz</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">MirroredTypeException</span><span class="w"> </span><span class="n">mte</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">DeclaredType</span><span class="w"> </span><span class="n">classTypeMirror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">DeclaredType</span><span class="p">)</span><span class="w"> </span><span class="n">mte</span><span class="p">.</span><span class="na">getTypeMirror</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">classTypeElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">TypeElement</span><span class="p">)</span><span class="w"> </span><span class="n">classTypeMirror</span><span class="p">.</span><span class="na">asElement</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">qualifiedGroupClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classTypeElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">simpleFactoryGroupName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classTypeElement</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÊúâ‰∏ÄÁÇπÂ∞èÈ∫ªÁÉ¶ÔºåÂõ†‰∏∫ËøôÈáåÁöÑÁ±ªÂûãÊòØ‰∏Ä‰∏™<code>java.lang.Class</code>„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÔºå‰ªñÊòØ‰∏Ä‰∏™ÁúüÊ≠£ÁöÑClassÂØπË±°„ÄÇÂõ†‰∏∫Ê≥®Ëß£Â§ÑÁêÜÊòØÂú®ÁºñËØëJavaÊ∫ê‰ª£Á†Å‰πãÂâç„ÄÇÊàë‰ª¨ÈúÄË¶ÅËÄÉËôëÂ¶Ç‰∏ã‰∏§ÁßçÊÉÖÂÜµÔºö</p>
<ol>
<li><strong>Ëøô‰∏™Á±ªÂ∑≤ÁªèË¢´ÁºñËØë</strong>ÔºöËøôÁßçÊÉÖÂÜµÊòØÔºöÂ¶ÇÊûúÁ¨¨‰∏âÊñπ<code>.jar</code>ÂåÖÂê´Â∑≤ÁºñËØëÁöÑË¢´@FactoryÊ≥®Ëß£<code>.class</code>Êñá‰ª∂„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•ÊÉ≥<code>try</code>‰∏≠ÈÇ£Âùó‰ª£Á†Å‰∏≠ÊâÄÁ§∫Áõ¥Êé•Ëé∑Âèñ<code>Class</code>„ÄÇ</li>
<li><strong>Ëøô‰∏™ËøòÊ≤°ÊúâË¢´ÁºñËØë</strong>ÔºöËøôÁßçÊÉÖÂÜµÊòØÊàë‰ª¨Â∞ùËØïÁºñËØëË¢´@FractoryÊ≥®Ëß£ÁöÑÊ∫ê‰ª£Á†Å„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁõ¥Êé•Ëé∑ÂèñClass‰ºöÊäõÂá∫<code>MirroredTypeException</code>ÂºÇÂ∏∏„ÄÇÂπ∏ËøêÁöÑÊòØÔºåMirroredTypeExceptionÂåÖÂê´‰∏Ä‰∏™<code>TypeMirror</code>ÔºåÂÆÉË°®Á§∫Êàë‰ª¨Êú™ÁºñËØëÁ±ª„ÄÇÂõ†‰∏∫Êàë‰ª¨Â∑≤ÁªèÁü•ÈÅìÂÆÉÂøÖÂÆöÊòØ‰∏Ä‰∏™Á±ªÁ±ªÂûãÔºàÊàë‰ª¨Â∑≤ÁªèÂú®ÂâçÈù¢Ê£ÄÊü•ËøáÔºâÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•Âº∫Âà∂ËΩ¨Êç¢‰∏∫<code>DeclaredType</code>ÔºåÁÑ∂ÂêéËØªÂèñ<code>TypeElement</code>Êù•Ëé∑ÂèñÂêàÊ≥ïÁöÑÂêçÂ≠ó„ÄÇ</li>
</ol>
<p>Â•Ω‰∫ÜÔºåÊàë‰ª¨Áé∞Âú®ËøòÈúÄË¶Å‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑ<code>FactoryGroupedClasses</code>ÔºåÂÆÉÂ∞ÜÁÆÄÂçïÁöÑÁªÑÂêàÊâÄÊúâÁöÑ<code>FactoryAnnotatedClasses</code>Âà∞‰∏ÄËµ∑„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FactoryGroupedClasses</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">qualifiedClassName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryAnnotatedClass</span><span class="o">&gt;</span><span class="w"> </span><span class="n">itemsMap</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryAnnotatedClass</span><span class="o">&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="nf">FactoryGroupedClasses</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">qualifiedClassName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">qualifiedClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">qualifiedClassName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">FactoryAnnotatedClass</span><span class="w"> </span><span class="n">toInsert</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IdAlreadyUsedException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">FactoryAnnotatedClass</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemsMap</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">toInsert</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">existing</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IdAlreadyUsedException</span><span class="p">(</span><span class="n">existing</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">itemsMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">toInsert</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">toInsert</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">generateCode</span><span class="p">(</span><span class="n">Elements</span><span class="w"> </span><span class="n">elementUtils</span><span class="p">,</span><span class="w"> </span><span class="n">Filer</span><span class="w"> </span><span class="n">filer</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠£Â¶Ç‰Ω†ÊâÄËßÅÔºåËøôÊòØ‰∏Ä‰∏™Âü∫Êú¨ÁöÑ<code>Map&lt;String, FactoryAnnotatedClass&gt;</code>ÔºåËøô‰∏™Êò†Â∞ÑË°®Áî®Êù•Êò†Â∞Ñ@Factory.id()Âà∞FactoryAnnotatedClass„ÄÇÊàë‰ª¨ÈÄâÊã©<code>Map</code>Ëøô‰∏™Êï∞ÊçÆÁ±ªÂûãÔºåÊòØÂõ†‰∏∫Êàë‰ª¨Ë¶ÅÁ°Æ‰øùÊØè‰∏™idÊòØÂîØ‰∏ÄÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÈÄöËøámapÊü•ÊâæÂÆûÁé∞„ÄÇ<code>generateCode()</code>ÊñπÊ≥ïÂ∞ÜË¢´Áî®Êù•ÁîüÊàêÂ∑•ÂéÇÁ±ª‰ª£Á†ÅÔºàÂ∞ÜÂú®ÂêéÈù¢ËÆ®ËÆ∫Ôºâ„ÄÇ</p>
<h3 id="ÂåπÈÖçÊ†áÂáÜ">ÂåπÈÖçÊ†áÂáÜ
</h3><p>Êàë‰ª¨ÁªßÁª≠ÂÆûÁé∞<code>process()</code>ÊñπÊ≥ï„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨ÊÉ≥Ë¶ÅÊ£ÄÊü•Ë¢´Ê≥®Ëß£ÁöÑÁ±ªÂøÖÈ°ªÊúâÂè™Ë¶Å‰∏Ä‰∏™ÂÖ¨ÂºÄÁöÑÊûÑÈÄ†ÂáΩÊï∞Ôºå‰∏çÊòØÊäΩË±°Á±ªÔºåÁªßÊâø‰∫éÁâπÂÆöÁöÑÁ±ªÂûãÔºå‰ª•ÂèäÊòØ‰∏Ä‰∏™ÂÖ¨ÂºÄÁ±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FactoryProcessor</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractProcessor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">annotatedElement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">.</span><span class="na">getElementsAnnotatedWith</span><span class="p">(</span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c1">// Âõ†‰∏∫Êàë‰ª¨Â∑≤ÁªèÁü•ÈÅìÂÆÉÊòØElementKind.CLASSÁ±ªÂûãÔºåÊâÄ‰ª•ÂèØ‰ª•Áõ¥Êé•Âº∫Âà∂ËΩ¨Êç¢</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">typeElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">TypeElement</span><span class="p">)</span><span class="w"> </span><span class="n">annotatedElement</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FactoryAnnotatedClass</span><span class="w"> </span><span class="n">annotatedClass</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">FactoryAnnotatedClass</span><span class="p">(</span><span class="n">typeElement</span><span class="p">);</span><span class="w"> </span><span class="c1">// throws IllegalArgumentException</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">isValidClass</span><span class="p">(</span><span class="n">annotatedClass</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// Â∑≤ÁªèÊâìÂç∞‰∫ÜÈîôËØØ‰ø°ÊÅØÔºåÈÄÄÂá∫Â§ÑÁêÜËøáÁ®ã</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// @Factory.id()‰∏∫Á©∫</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">error</span><span class="p">(</span><span class="n">typeElement</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isValidClass</span><span class="p">(</span><span class="n">FactoryAnnotatedClass</span><span class="w"> </span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ËΩ¨Êç¢‰∏∫TypeElement, Âê´ÊúâÊõ¥Â§öÁâπÂÆöÁöÑÊñπÊ≥ï</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">classElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="na">getTypeElement</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">classElement</span><span class="p">.</span><span class="na">getModifiers</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="n">Modifier</span><span class="p">.</span><span class="na">PUBLIC</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">error</span><span class="p">(</span><span class="n">classElement</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;The class %s is not public.&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">classElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ê£ÄÊü•ÊòØÂê¶ÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">classElement</span><span class="p">.</span><span class="na">getModifiers</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="n">Modifier</span><span class="p">.</span><span class="na">ABSTRACT</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">error</span><span class="p">(</span><span class="n">classElement</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;The class %s is abstract. You can&#39;t annotate abstract classes with @%&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">classElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span><span class="w"> </span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ê£ÄÊü•ÁªßÊâøÂÖ≥Á≥ª: ÂøÖÈ°ªÊòØ@Factory.type()ÊåáÂÆöÁöÑÁ±ªÂûãÂ≠êÁ±ª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">superClassElement</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">elementUtils</span><span class="p">.</span><span class="na">getTypeElement</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">getQualifiedFactoryGroupName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">superClassElement</span><span class="p">.</span><span class="na">getKind</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ElementKind</span><span class="p">.</span><span class="na">INTERFACE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c1">// Ê£ÄÊü•Êé•Âè£ÊòØÂê¶ÂÆûÁé∞‰∫Ü                                       if(!classElement.getInterfaces().contains(superClassElement.asType())) {</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">error</span><span class="p">(</span><span class="n">classElement</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;The class %s annotated with @%s must implement the interface %s&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">classElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span><span class="w"> </span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">(),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">item</span><span class="p">.</span><span class="na">getQualifiedFactoryGroupName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c1">// Ê£ÄÊü•Â≠êÁ±ª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">currentClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classElement</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">TypeMirror</span><span class="w"> </span><span class="n">superClassType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentClass</span><span class="p">.</span><span class="na">getSuperclass</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">superClassType</span><span class="p">.</span><span class="na">getKind</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TypeKind</span><span class="p">.</span><span class="na">NONE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c1">// Âà∞Ëææ‰∫ÜÂü∫Êú¨Á±ªÂûã(java.lang.Object), ÊâÄ‰ª•ÈÄÄÂá∫</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">error</span><span class="p">(</span><span class="n">classElement</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;The class %s annotated with @%s must inherit from %s&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="n">classElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span><span class="w"> </span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">(),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="n">item</span><span class="p">.</span><span class="na">getQualifiedFactoryGroupName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">superClassType</span><span class="p">.</span><span class="na">toString</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">getQualifiedFactoryGroupName</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c1">// ÊâæÂà∞‰∫ÜË¶ÅÊ±ÇÁöÑÁà∂Á±ª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">break</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Âú®ÁªßÊâøÊ†ë‰∏äÁªßÁª≠Âêë‰∏äÊêúÂØª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">currentClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">TypeElement</span><span class="p">)</span><span class="w"> </span><span class="n">typeUtils</span><span class="p">.</span><span class="na">asElement</span><span class="p">(</span><span class="n">superClassType</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ê£ÄÊü•ÊòØÂê¶Êèê‰æõ‰∫ÜÈªòËÆ§ÂÖ¨ÂºÄÊûÑÈÄ†ÂáΩÊï∞</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">enclosed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">classElement</span><span class="p">.</span><span class="na">getEnclosedElements</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">enclosed</span><span class="p">.</span><span class="na">getKind</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ElementKind</span><span class="p">.</span><span class="na">CONSTRUCTOR</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ExecutableElement</span><span class="w"> </span><span class="n">constructorElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ExecutableElement</span><span class="p">)</span><span class="w"> </span><span class="n">enclosed</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">constructorElement</span><span class="p">.</span><span class="na">getParameters</span><span class="p">().</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">constructorElement</span><span class="p">.</span><span class="na">getModifiers</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">Modifier</span><span class="p">.</span><span class="na">PUBLIC</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c1">// ÊâæÂà∞‰∫ÜÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ê≤°ÊúâÊâæÂà∞ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">error</span><span class="p">(</span><span class="n">classElement</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;The class %s must provide an public empty default constructor&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">classElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨ËøôÈáåÊ∑ªÂä†‰∫Ü<code>isValidClass()</code>ÊñπÊ≥ïÔºåÊù•Ê£ÄÊü•ÊòØÂê¶Êàë‰ª¨ÊâÄÊúâÁöÑËßÑÂàôÈÉΩË¢´Êª°Ë∂≥‰∫ÜÔºö</p>
<ul>
<li>ÂøÖÈ°ªÊòØÂÖ¨ÂºÄÁ±ªÔºö<code>classElement.getModifiers().contains(Modifier.PUBLIC)</code></li>
<li>ÂøÖÈ°ªÊòØÈùûÊäΩË±°Á±ªÔºö<code>classElement.getModifiers().contains(Modifier.ABSTRACT)</code></li>
<li>ÂøÖÈ°ªÊòØ<code>@Factoy.type()</code>ÊåáÂÆöÁöÑÁ±ªÂûãÁöÑÂ≠êÁ±ªÊàñËÄÖÊé•Âè£ÁöÑÂÆûÁé∞ÔºöÈ¶ñÂÖàÊàë‰ª¨‰ΩøÁî®<code>elementUtils.getTypeElement(item.getQualifiedFactoryGroupName())</code>ÂàõÂª∫‰∏Ä‰∏™‰º†ÂÖ•ÁöÑ<code>Class</code>(<code>@Factoy.type()</code>)ÁöÑÂÖÉÁ¥†„ÄÇÊòØÁöÑÔºå‰Ω†ÂèØ‰ª•‰ªÖ‰ªÖÈÄöËøáÂ∑≤Áü•ÁöÑÂêàÊ≥ïÁ±ªÂêçÊù•Áõ¥Êé•ÂàõÂª∫<code>TypeElement</code>Ôºà‰ΩøÁî®TypeMirrorÔºâ„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨Ê£ÄÊü•ÂÆÉÊòØ‰∏Ä‰∏™Êé•Âè£ËøòÊòØ‰∏Ä‰∏™Á±ªÔºö<code>superClassElement.getKind() == ElementKind.INTERFACE</code>„ÄÇÊâÄ‰ª•Êàë‰ª¨ËøôÈáåÊúâ‰∏§ÁßçÊÉÖÂÜµÔºöÂ¶ÇÊûúÊòØÊé•Âè£ÔºåÂ∞±Âà§Êñ≠<code>classElement.getInterfaces().contains(superClassElement.asType())</code>ÔºõÂ¶ÇÊûúÊòØÁ±ªÔºåÊàë‰ª¨Â∞±ÂøÖÈ°ª‰ΩøÁî®<code>currentClass.getSuperclass()</code>Êâ´ÊèèÁªßÊâøÂ±ÇÁ∫ß„ÄÇÊ≥®ÊÑèÔºåÊï¥‰∏™Ê£ÄÊü•‰πüÂèØ‰ª•‰ΩøÁî®<code>typeUtils.isSubtype()</code>Êù•ÂÆûÁé∞„ÄÇ</li>
<li>Á±ªÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂÖ¨ÂºÄÁöÑÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºöÊàë‰ª¨ÈÅçÂéÜÊâÄÊúâÁöÑÈó≠ÂÖÉÁ¥†<code>classElement.getEnclosedElements()</code>ÔºåÁÑ∂ÂêéÊ£ÄÊü•<code>ElementKind.CONSTRUCTOR</code>„ÄÅ<code>Modifier.PUBLIC</code>‰ª•Âèä<code>constructorElement.getParameters().size() == 0</code>„ÄÇ</li>
</ul>
<p>Â¶ÇÊûúÊâÄÊúâËøô‰∫õÊù°‰ª∂ÈÉΩÊª°Ë∂≥Ôºå<code>isValidClass()</code>ËøîÂõû<code>true</code>ÔºåÂê¶ËÄÖÂ∞±ÊâìÂç∞ÈîôËØØ‰ø°ÊÅØÔºåÂπ∂‰∏îËøîÂõû<code>false</code>„ÄÇ</p>
<h3 id="ÁªÑÂêàË¢´Ê≥®Ëß£ÁöÑÁ±ª">ÁªÑÂêàË¢´Ê≥®Ëß£ÁöÑÁ±ª
</h3><p>‰∏ÄÊó¶Êàë‰ª¨Ê£ÄÊü•<code>isValidClass()</code>ÊàêÂäüÔºåÊàë‰ª¨Â∞ÜÊ∑ªÂä†<code>FactoryAnnotatedClass</code>Âà∞ÂØπÂ∫îÁöÑ<code>FactoryGroupedClasses</code>‰∏≠ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FactoryProcessor</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractProcessor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryGroupedClasses</span><span class="o">&gt;</span><span class="w"> </span><span class="n">factoryClasses</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryGroupedClasses</span><span class="o">&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FactoryAnnotatedClass</span><span class="w"> </span><span class="n">annotatedClass</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">FactoryAnnotatedClass</span><span class="p">(</span><span class="n">typeElement</span><span class="p">);</span><span class="w"> </span><span class="c1">// throws IllegalArgumentException</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">isValidClass</span><span class="p">(</span><span class="n">annotatedClass</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// ÈîôËØØ‰ø°ÊÅØË¢´ÊâìÂç∞ÔºåÈÄÄÂá∫Â§ÑÁêÜÊµÅÁ®ã</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ÊâÄÊúâÊ£ÄÊü•ÈÉΩÊ≤°ÊúâÈóÆÈ¢òÔºåÊâÄ‰ª•ÂèØ‰ª•Ê∑ªÂä†‰∫Ü</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FactoryGroupedClasses</span><span class="w"> </span><span class="n">factoryClass</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">factoryClasses</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">annotatedClass</span><span class="p">.</span><span class="na">getQualifiedFactoryGroupName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">factoryClass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">String</span><span class="w"> </span><span class="n">qualifiedGroupName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annotatedClass</span><span class="p">.</span><span class="na">getQualifiedFactoryGroupName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">factoryClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FactoryGroupedClasses</span><span class="p">(</span><span class="n">qualifiedGroupName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">factoryClasses</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">qualifiedGroupName</span><span class="p">,</span><span class="w"> </span><span class="n">factoryClass</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Â¶ÇÊûúÂíåÂÖ∂‰ªñÁöÑ@FactoryÊ†áÊ≥®ÁöÑÁ±ªÁöÑidÁõ∏ÂêåÂÜ≤Á™ÅÔºå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ÊäõÂá∫IdAlreadyUsedExceptionÂºÇÂ∏∏</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">factoryClass</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">annotatedClass</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// @Factory.id()‰∏∫Á©∫ --&gt; ÊâìÂç∞ÈîôËØØ‰ø°ÊÅØ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">error</span><span class="p">(</span><span class="n">typeElement</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IdAlreadyUsedException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FactoryAnnotatedClass</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getExisting</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Â∑≤ÁªèÂ≠òÂú®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">error</span><span class="p">(</span><span class="n">annotatedElement</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;Conflict: The class %s is annotated with @%s with id =&#39;%s&#39; but %s already uses the same id&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">typeElement</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span><span class="w"> </span><span class="n">Factory</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">(),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">existing</span><span class="p">.</span><span class="na">getTypeElement</span><span class="p">().</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ª£Á†ÅÁîüÊàê">‰ª£Á†ÅÁîüÊàê
</h3><p>Êàë‰ª¨Â∑≤ÁªèÊî∂ÈõÜ‰∫ÜÊâÄÊúâÁöÑË¢´<code>@Factory</code>Ê≥®Ëß£ÁöÑÁ±ª‰øùÂ≠òÂà∞‰∏∫<code>FactoryAnnotatedClass</code>ÔºåÂπ∂‰∏îÁªÑÂêàÂà∞‰∫Ü<code>FactoryGroupedClasses</code>„ÄÇÁé∞Âú®Êàë‰ª¨Â∞Ü‰∏∫ÊØè‰∏™Â∑•ÂéÇÁîüÊàêJavaÊñá‰ª∂‰∫ÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">FactoryGroupedClasses</span><span class="w"> </span><span class="n">factoryClass</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">factoryClasses</span><span class="p">.</span><span class="na">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">factoryClass</span><span class="p">.</span><span class="na">generateCode</span><span class="p">(</span><span class="n">elementUtils</span><span class="p">,</span><span class="w"> </span><span class="n">filer</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">error</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜôJavaÊñá‰ª∂ÔºåÂíåÂÜôÂÖ∂‰ªñÊôÆÈÄöÊñá‰ª∂Ê≤°Êúâ‰ªÄ‰πà‰∏§Ê†∑„ÄÇ‰ΩøÁî®<code>Filer</code>Êèê‰æõÁöÑ<code>Writer</code>ÂØπË±°ÔºåÊàë‰ª¨ÂèØ‰ª•ËøûÊé•Â≠óÁ¨¶‰∏≤Êù•ÂÜôÊàë‰ª¨ÁîüÊàêÁöÑJava‰ª£Á†Å„ÄÇÂπ∏ËøêÁöÑÊòØÔºåSquareÂÖ¨Âè∏ÔºàÂõ†‰∏∫Êèê‰æõ‰∫ÜËÆ∏Â§öÈùûÂ∏∏‰ºòÁßÄÁöÑÂºÄÊ∫êÈ°πÁõÆ‰∫åÈùûÂ∏∏ÊúâÂêçÔºâÁªôÊàë‰ª¨Êèê‰æõ‰∫Ü<a class="link" href="https://github.com/square/javawriter"  target="_blank" rel="noopener"
    ><code>JavaWriter</code></a>ÔºåËøôÊòØ‰∏Ä‰∏™È´òÁ∫ßÁöÑÁîüÊàêJava‰ª£Á†ÅÁöÑÂ∫ìÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FactoryGroupedClasses</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * Â∞ÜË¢´Ê∑ªÂä†Âà∞ÁîüÊàêÁöÑÂ∑•ÂéÇÁ±ªÁöÑÂêçÂ≠ó‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">SUFFIX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Factory&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">qualifiedClassName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryAnnotatedClass</span><span class="o">&gt;</span><span class="w"> </span><span class="n">itemsMap</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">FactoryAnnotatedClass</span><span class="o">&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">generateCode</span><span class="p">(</span><span class="n">Elements</span><span class="w"> </span><span class="n">elementUtils</span><span class="p">,</span><span class="w"> </span><span class="n">Filer</span><span class="w"> </span><span class="n">filer</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">TypeElement</span><span class="w"> </span><span class="n">superClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elementUtils</span><span class="p">.</span><span class="na">getTypeElement</span><span class="p">(</span><span class="n">qualifiedClassName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">factoryClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">superClassName</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">SUFFIX</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">JavaFileObject</span><span class="w"> </span><span class="n">jfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filer</span><span class="p">.</span><span class="na">createSourceFile</span><span class="p">(</span><span class="n">qualifiedClassName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">SUFFIX</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Writer</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jfo</span><span class="p">.</span><span class="na">openWriter</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">JavaWriter</span><span class="w"> </span><span class="n">jw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JavaWriter</span><span class="p">(</span><span class="n">writer</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂÜôÂåÖÂêç</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PackageElement</span><span class="w"> </span><span class="n">pkg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elementUtils</span><span class="p">.</span><span class="na">getPackageOf</span><span class="p">(</span><span class="n">superClassName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">pkg</span><span class="p">.</span><span class="na">isUnnamed</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">jw</span><span class="p">.</span><span class="na">emitPackage</span><span class="p">(</span><span class="n">pkg</span><span class="p">.</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">jw</span><span class="p">.</span><span class="na">emitEmptyLine</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">jw</span><span class="p">.</span><span class="na">emitPackage</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">beginType</span><span class="p">(</span><span class="n">factoryClassName</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;class&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">EnumSet</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Modifier</span><span class="p">.</span><span class="na">PUBLIC</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">emitEmptyLine</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">beginMethod</span><span class="p">(</span><span class="n">qualifiedClassName</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;create&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">EnumSet</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Modifier</span><span class="p">.</span><span class="na">PUBLIC</span><span class="p">),</span><span class="w"> </span><span class="s">&#34;String&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;id&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">beginControlFlow</span><span class="p">(</span><span class="s">&#34;if (id == null)&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">emitStatement</span><span class="p">(</span><span class="s">&#34;throw new IllegalArgumentException(\&#34;id is null!\&#34;)&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">endControlFlow</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">FactoryAnnotatedClass</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">itemsMap</span><span class="p">.</span><span class="na">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">jw</span><span class="p">.</span><span class="na">beginControlFlow</span><span class="p">(</span><span class="s">&#34;if (\&#34;%s\&#34;.equals(id))&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">jw</span><span class="p">.</span><span class="na">emitStatement</span><span class="p">(</span><span class="s">&#34;return new %s()&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="na">getTypeElement</span><span class="p">().</span><span class="na">getQualifiedName</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">jw</span><span class="p">.</span><span class="na">endControlFlow</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">jw</span><span class="p">.</span><span class="na">emitEmptyLine</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">emitStatement</span><span class="p">(</span><span class="s">&#34;throw new IllegalArgumentException(\&#34;Unknown id = \&#34; + id)&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">endMethod</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">endType</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">jw</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Ê≥®ÊÑèÔºöÂõ†‰∏∫JavaWriterÈùûÂ∏∏ÈùûÂ∏∏ÁöÑÊµÅË°åÔºåÊâÄ‰ª•ÂæàÂ§öÂ§ÑÁêÜÂô®„ÄÅÂ∫ì„ÄÅÂ∑•ÂÖ∑ÈÉΩ‰æùËµñ‰∫éJavaWriter„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®‰æùËµñÁÆ°ÁêÜÂ∑•ÂÖ∑Ôºå‰æãÂ¶ÇmavenÊàñËÄÖgradleÔºåÂÅáÂ¶Ç‰∏Ä‰∏™Â∫ì‰æùËµñÁöÑJavaWriterÁöÑÁâàÊú¨ÊØîÂÖ∂‰ªñÁöÑÂ∫ìÊñ∞ÔºåËøôÂ∞Ü‰ºöÂØºËá¥‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÊàëÂª∫ËÆÆ‰Ω†Áõ¥Êé•Êã∑Ë¥ùÈáçÊñ∞ÊâìÂåÖJavaWiterÂà∞‰Ω†ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®‰ª£Á†Å‰∏≠ÔºàÂÆûÈôÖÂÆÉÂè™ÊòØ‰∏Ä‰∏™JavaÊñá‰ª∂Ôºâ„ÄÇ</p>
</blockquote>
<p><strong>Êõ¥Êñ∞</strong>ÔºöJavaWriteÁé∞Âú®Â∑≤ÁªèË¢´<a class="link" href="https://github.com/square/javapoet"  target="_blank" rel="noopener"
    ><code>JavaPoet</code></a>Âèñ‰ª£‰∫Ü„ÄÇ</p>
<h3 id="Â§ÑÁêÜÂæ™ÁéØ">Â§ÑÁêÜÂæ™ÁéØ
</h3><p>Ê≥®Ëß£Â§ÑÁêÜËøáÁ®ãÂèØËÉΩ‰ºöÂ§ö‰∫é‰∏ÄÊ¨°„ÄÇÂÆòÊñπjavadocÂÆö‰πâÂ§ÑÁêÜËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<blockquote>
<p>Ê≥®Ëß£Â§ÑÁêÜËøáÁ®ãÊòØ‰∏Ä‰∏™ÊúâÂ∫èÁöÑÂæ™ÁéØËøáÁ®ã„ÄÇÂú®ÊØèÊ¨°Âæ™ÁéØ‰∏≠Ôºå‰∏Ä‰∏™Â§ÑÁêÜÂô®ÂèØËÉΩË¢´Ë¶ÅÊ±ÇÂéªÂ§ÑÁêÜÈÇ£‰∫õÂú®‰∏ä‰∏ÄÊ¨°Âæ™ÁéØ‰∏≠‰∫ßÁîüÁöÑÊ∫êÊñá‰ª∂ÂíåÁ±ªÊñá‰ª∂‰∏≠ÁöÑÊ≥®Ëß£„ÄÇÁ¨¨‰∏ÄÊ¨°Âæ™ÁéØÁöÑËæìÂÖ•ÊòØËøêË°åÊ≠§Â∑•ÂÖ∑ÁöÑÂàùÂßãËæìÂÖ•„ÄÇËøô‰∫õÂàùÂßãËæìÂÖ•ÔºåÂèØ‰ª•ÁúãÊàêÊòØËôöÊãüÁöÑÁ¨¨0Ê≠§ÁöÑÂæ™ÁéØÁöÑËæìÂá∫„ÄÇ</p>
</blockquote>
<p>‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÆö‰πâÔºö‰∏Ä‰∏™Â§ÑÁêÜÂæ™ÁéØÊòØË∞ÉÁî®‰∏Ä‰∏™Ê≥®Ëß£Â§ÑÁêÜÂô®ÁöÑ<code>process()</code>ÊñπÊ≥ï„ÄÇÂØπÂ∫îÂà∞Êàë‰ª¨ÁöÑÂ∑•ÂéÇÊ®°ÂºèÁöÑ‰æãÂ≠ê‰∏≠Ôºö<code>FactoryProcessor</code>Ë¢´ÂàùÂßãÂåñ‰∏ÄÊ¨°Ôºà‰∏çÊòØÊØèÊ¨°Âæ™ÁéØÈÉΩ‰ºöÊñ∞Âª∫Â§ÑÁêÜÂô®ÂØπË±°ÔºâÔºåÁÑ∂ËÄåÔºåÂ¶ÇÊûúÁîüÊàê‰∫ÜÊñ∞ÁöÑÊ∫êÊñá‰ª∂<code>process()</code>ËÉΩÂ§üË¢´Ë∞ÉÁî®Â§öÊ¨°„ÄÇÂê¨Ëµ∑Êù•ÊúâÁÇπÂ•áÊÄ™‰∏çÊòØ‰πàÔºüÂéüÂõ†ÊòØËøôÊ†∑ÁöÑÔºåËøô‰∫õÁîüÊàêÁöÑÊñá‰ª∂‰∏≠‰πüÂèØËÉΩÂåÖÂê´@FactoryÊ≥®Ëß£ÔºåÂÆÉ‰ª¨ËøòÂ∞Ü‰ºöË¢´<code>FactoryProcessor</code>Â§ÑÁêÜ„ÄÇ</p>
<p>‰æãÂ¶ÇÊàë‰ª¨ÁöÑ<code>PizzaStore</code>ÁöÑ‰æãÂ≠ê‰∏≠Â∞Ü‰ºöÁªèËøá3Ê¨°Âæ™ÁéØÂ§ÑÁêÜÔºö</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Round</th>
          <th style="text-align: left">Input</th>
          <th style="text-align: left">Output</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: left">CalzonePizza.java Tiramisu.java MargheritaPizza.java Meal.java PizzaStore.java</td>
          <td style="text-align: left">MealFactory.java</td>
      </tr>
      <tr>
          <td style="text-align: left">2</td>
          <td style="text-align: left">MealFactory.java</td>
          <td style="text-align: left">&mdash; none &mdash;</td>
      </tr>
      <tr>
          <td style="text-align: left">3</td>
          <td style="text-align: left">&mdash; none &mdash;</td>
          <td style="text-align: left">&mdash; none &mdash;</td>
      </tr>
  </tbody>
</table></div>
<p>ÊàëËß£ÈáäÂ§ÑÁêÜÂæ™ÁéØËøòÊúâÂè¶Â§ñ‰∏Ä‰∏™ÂéüÂõ†„ÄÇÂ¶ÇÊûú‰Ω†Áúã‰∏Ä‰∏ãÊàë‰ª¨ÁöÑ<code>FactoryProcessor</code>‰ª£Á†Å‰Ω†Â∞±ËÉΩÊ≥®ÊÑèÂà∞ÔºåÊàë‰ª¨Êî∂ÈõÜÊï∞ÊçÆÂíå‰øùÂ≠òÂÆÉ‰ª¨Âú®‰∏Ä‰∏™ÁßÅÊúâÁöÑÂüü‰∏≠<code>Map&lt;String, FactoryGroupedClasses&gt; factoryClasses</code>„ÄÇÂú®Á¨¨‰∏ÄËΩÆ‰∏≠ÔºåÊàë‰ª¨Ê£ÄÊµãÂà∞‰∫ÜMagheritaPizza, CalzonePizzaÂíåTiramisuÔºåÁÑ∂ÂêéÁîüÊàê‰∫ÜMealFactory.java„ÄÇÂú®Á¨¨‰∫åËΩÆ‰∏≠ÊääMealFactory‰Ωú‰∏∫ËæìÂÖ•„ÄÇÂõ†‰∏∫Âú®MealFactory‰∏≠Ê≤°ÊúâÊ£ÄÊµãÂà∞@FactoryÊ≥®Ëß£ÔºåÊàë‰ª¨È¢ÑÊúüÂπ∂Ê≤°ÊúâÈîôËØØÔºåÁÑ∂ËÄåÊàë‰ª¨ÂæóÂà∞Â¶Ç‰∏ãÁöÑ‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Attempt to recreate a file for type com.hannesdorfmann.annotationprocessing101.factory.MealFactory  
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™ÈóÆÈ¢òÊòØÂõ†‰∏∫Êàë‰ª¨Ê≤°ÊúâÊ∏ÖÈô§<code>factoryClasses</code>ÔºåËøôÊÑèÂë≥ÁùÄÔºåÂú®Á¨¨‰∫åËΩÆÁöÑ<code>process()</code>‰∏≠Ôºå‰ªªÁÑ∂‰øùÂ≠òÁùÄÁ¨¨‰∏ÄËΩÆÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏î‰ºöÂ∞ùËØïÁîüÊàêÂú®Á¨¨‰∏ÄËΩÆ‰∏≠Â∑≤ÁªèÁîüÊàêÁöÑÊñá‰ª∂Ôºå‰ªéËÄåÂØºËá¥Ëøô‰∏™ÈîôËØØÁöÑÂá∫Áé∞„ÄÇÂú®Êàë‰ª¨ÁöÑËøô‰∏™Âú∫ÊôØ‰∏≠ÔºåÊàë‰ª¨Áü•ÈÅìÂè™ÊúâÂú®Á¨¨‰∏ÄËΩÆ‰∏≠Ê£ÄÊü•<code>@Factory</code>Ê≥®Ëß£ÁöÑÁ±ªÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÁÆÄÂçïÁöÑ‰øÆÂ§çËøô‰∏™ÈóÆÈ¢òÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Set</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TypeElement</span><span class="o">&gt;</span><span class="w"> </span><span class="n">annotations</span><span class="p">,</span><span class="w"> </span><span class="n">RoundEnvironment</span><span class="w"> </span><span class="n">roundEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">FactoryGroupedClasses</span><span class="w"> </span><span class="n">factoryClass</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">factoryClasses</span><span class="p">.</span><span class="na">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">factoryClass</span><span class="p">.</span><span class="na">generateCode</span><span class="p">(</span><span class="n">elementUtils</span><span class="p">,</span><span class="w"> </span><span class="n">filer</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c1">// Ê∏ÖÈô§factoryClasses</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">factoryClasses</span><span class="p">.</span><span class="na">clear</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">error</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàëÁü•ÈÅìËøôÊúâÂÖ∂‰ªñÁöÑÊñπÊ≥ïÊù•Â§ÑÁêÜËøô‰∏™ÈóÆÈ¢òÔºå‰æãÂ¶ÇÊàë‰ª¨‰πüÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÊ†áÁ≠æÁ≠â„ÄÇÂÖ≥ÈîÆÁöÑÁÇπÊòØÔºöÊàë‰ª¨Ë¶ÅËÆ∞‰ΩèÊ≥®Ëß£Â§ÑÁêÜËøáÁ®ãÊòØÈúÄË¶ÅÁªèËøáÂ§öËΩÆÂ§ÑÁêÜÁöÑÔºåÂπ∂‰∏î‰Ω†‰∏çËÉΩÈáçËΩΩÊàñËÄÖÈáçÊñ∞ÂàõÂª∫Â∑≤ÁªèÁîüÊàêÁöÑÊ∫ê‰ª£Á†Å„ÄÇ</p>
<h3 id="ÂàÜÁ¶ªÂ§ÑÁêÜÂô®ÂíåÊ≥®Ëß£">ÂàÜÁ¶ªÂ§ÑÁêÜÂô®ÂíåÊ≥®Ëß£
</h3><p>Â¶ÇÊûú‰Ω†Â∑≤ÁªèÁúã‰∫ÜÊàë‰ª¨ÁöÑ<a class="link" href="https://github.com/sockeqwe/annotationprocessing101/tree/master/factory"  target="_blank" rel="noopener"
    >‰ª£Á†ÅÂ∫ì</a>Ôºå‰Ω†Â∞ÜÂèëÁé∞Êàë‰ª¨ÁªÑÁªáÊàë‰ª¨ÁöÑ‰ª£Á†ÅÂà∞‰∏§‰∏™mavenÊ®°Âùó‰∏≠‰∫Ü„ÄÇÊàë‰ª¨Ëøô‰πàÂÅöÊòØÂõ†‰∏∫ÔºåÊàë‰ª¨ÊÉ≥ËÆ©Êàë‰ª¨ÁöÑÂ∑•ÂéÇÊ®°ÂºèÁöÑ‰æãÂ≠êÁöÑ‰ΩøÁî®ËÄÖÔºåÂú®‰ªñ‰ª¨ÁöÑÂ∑•Á®ã‰∏≠Âè™ÁºñËØëÊ≥®Ëß£ÔºåËÄåÂåÖÂê´Â§ÑÁêÜÂô®Ê®°ÂùóÂè™ÊòØ‰∏∫‰∫ÜÁºñËØë„ÄÇÊúâÁÇπÊôïÔºüÊàë‰ª¨‰∏æ‰∏™‰æãÂ≠êÔºåÂ¶ÇÊûúÊàë‰ª¨Âè™Êúâ‰∏Ä‰∏™ÂåÖ„ÄÇÂ¶ÇÊûúÂè¶‰∏Ä‰∏™ÂºÄÂèëËÄÖÊÉ≥Ë¶ÅÊääÊàë‰ª¨ÁöÑÂ∑•ÂéÇÊ®°ÂºèÂ§ÑÁêÜÂô®Áî®‰∫é‰ªñÁöÑÈ°πÁõÆ‰∏≠Ôºå‰ªñÂ∞±ÂøÖÈ°ªÂåÖÂê´<code>@Factory</code>Ê≥®Ëß£ÂíåÊï¥‰∏™<code>FactoryProcessor</code>ÁöÑ‰ª£Á†ÅÔºàÂåÖÊã¨FactoryAnnotatedClassÂíåFactoryGroupedClassesÔºâÂà∞‰ªñ‰ª¨È°πÁõÆ‰∏≠„ÄÇÊàëÈùûÂ∏∏Á°ÆÂÆöÁöÑÊòØÔºå‰ªñÂπ∂‰∏çÈúÄË¶ÅÂú®‰ªñÂ∑≤ÁªèÁºñËØëÂ•ΩÁöÑÈ°πÁõÆ‰∏≠ÂåÖÂê´Â§ÑÁêÜÂô®Áõ∏ÂÖ≥ÁöÑ‰ª£Á†Å„ÄÇÂ¶ÇÊûú‰Ω†ÊòØ‰∏Ä‰∏™AndroidÁöÑÂºÄÂèëËÄÖÔºå‰Ω†ËÇØÂÆöÂê¨ËØ¥Ëøá65k‰∏™ÊñπÊ≥ïÁöÑÈôêÂà∂ÔºàÂç≥Âú®‰∏Ä‰∏™.dexÊñá‰ª∂‰∏≠ÔºåÂè™ËÉΩÂØªÂùÄ65000‰∏™ÊñπÊ≥ïÔºâ„ÄÇÂ¶ÇÊûú‰Ω†Âú®FactoryProcessor‰∏≠‰ΩøÁî®guavaÔºåÂπ∂‰∏îÊääÊ≥®Ëß£ÂíåÂ§ÑÁêÜÂô®ÊâìÂåÖÂú®‰∏Ä‰∏™ÂåÖ‰∏≠ÔºåËøôÊ†∑ÁöÑËØùÔºåAndroid APKÂÆâË£ÖÂåÖ‰∏≠‰∏çÂè™ÊòØÂåÖÂê´FactoryProcessorÁöÑ‰ª£Á†ÅÔºåËÄå‰πüÂåÖÂê´‰∫ÜÊï¥‰∏™guavaÁöÑ‰ª£Á†Å„ÄÇGuavaÊúâÂ§ßÁ∫¶20000‰∏™ÊñπÊ≥ï„ÄÇÊâÄ‰ª•ÂàÜÂºÄÊ≥®Ëß£ÂíåÂ§ÑÁêÜÂô®ÊòØÈùûÂ∏∏ÊúâÊÑè‰πâÁöÑ„ÄÇ</p>
<h3 id="ÁîüÊàêÁöÑÁ±ªÁöÑÂÆû‰æãÂåñ">ÁîüÊàêÁöÑÁ±ªÁöÑÂÆû‰æãÂåñ
</h3><p>‰Ω†Â∑≤ÁªèÁúãÂà∞‰∫ÜÔºåÂú®Ëøô‰∏™<code>PizzaStore</code>ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÁîüÊàê‰∫Ü<code>MealFactory</code>Á±ªÔºåÂÆÉÂíåÂÖ∂‰ªñÊâãÂÜôÁöÑJavaÁ±ªÊ≤°Êúâ‰ªª‰ΩïÂå∫Âà´„ÄÇËøõËÄåÔºå‰Ω†ÈúÄË¶ÅÂ∞±ÊÉ≥ÂÖ∂‰ªñJavaÂØπË±°ÔºåÊâãÂä®ÂÆû‰æãÂåñ ÂÆÉÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PizzaStore</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">MealFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MealFactory</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Meal</span><span class="w"> </span><span class="nf">order</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">mealName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">factory</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">mealName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûú‰Ω†ÊòØ‰∏Ä‰∏™AndroidÁöÑÂºÄÂèëËÄÖÔºå‰Ω†Â∫îËØ•‰πüÈùûÂ∏∏ÁÜüÊÇâ‰∏Ä‰∏™Âè´ÂÅö<a class="link" href="http://jakewharton.github.io/butterknife/"  target="_blank" rel="noopener"
    ><code>ButterKnife</code></a>ÁöÑÊ≥®Ëß£Â§ÑÁêÜÂô®„ÄÇÂú®ButterKnife‰∏≠Ôºå‰Ω†‰ΩøÁî®<code>@InjectView</code>Ê≥®Ëß£AndroidÁöÑView„ÄÇButterKnifeProcessorÁîüÊàê‰∏Ä‰∏™<code>MyActivity$$ViewInjector</code>Ôºå‰ΩÜÊòØÂú®ButterKnife‰Ω†‰∏çÈúÄË¶ÅÊâãÂä®Ë∞ÉÁî®<code>new MyActivity$$ViewInjector()</code>ÂÆû‰æãÂåñ‰∏Ä‰∏™ButterKnifeÊ≥®ÂÖ•ÁöÑÂØπË±°ÔºåËÄåÊòØ‰ΩøÁî®<code>Butterknife.inject(activity)</code>„ÄÇButterKnifeÂÜÖÈÉ®‰ΩøÁî®ÂèçÂ∞ÑÊú∫Âà∂Êù•ÂÆû‰æãÂåñ<code>MyActivity$$ViewInjector()</code>ÂØπË±°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">injector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="n">clsName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;$$ViewInjector&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩÜÊòØÂèçÂ∞ÑÊú∫Âà∂‰∏çÊòØÂæàÊÖ¢‰πàÔºåÊàë‰ª¨‰ΩøÁî®Ê≥®Ëß£Â§ÑÁêÜÊù•ÁîüÊàêÊú¨Âú∞‰ª£Á†ÅÔºå‰ºö‰∏ç‰ºöÂØºËá¥ÂæàÂ§öÁöÑÂèçÂ∞ÑÊÄßËÉΩÁöÑÈóÆÈ¢òÔºüÁöÑÁ°ÆÔºåÂèçÂ∞ÑÊú∫Âà∂ÁöÑÊÄßËÉΩÁ°ÆÂÆûÊòØ‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÔºåÂÆÉ‰∏çÈúÄË¶ÅÊâãÂä®ÂéªÂàõÂª∫ÂØπË±°ÔºåÁ°ÆÂÆûÊèêÈ´ò‰∫ÜÂºÄÂèëËÄÖÁöÑÂºÄÂèëÈÄüÂ∫¶„ÄÇButterKnife‰∏≠Êúâ‰∏Ä‰∏™ÂìàÂ∏åË°®HashMapÊù•<strong>ÁºìÂ≠ò</strong>ÂÆû‰æãÂåñËøáÁöÑÂØπË±°„ÄÇÊâÄ‰ª•<code>MyActivity$$ViewInjector</code>Âè™ÊòØ‰ΩøÁî®ÂèçÂ∞ÑÊú∫Âà∂ÂÆû‰æãÂåñ‰∏ÄÊ¨°ÔºåÁ¨¨‰∫åÊ¨°ÈúÄË¶Å<code>MyActivity$$ViewInjector</code>ÁöÑÊó∂ÂÄôÔºåÂ∞±Áõ¥Êé•ÂÜ≤ÂìàÂ∏åË°®‰∏≠Ëé∑Âæó„ÄÇ</p>
<p><a class="link" href="https://github.com/sockeqwe/fragmentargs"  target="_blank" rel="noopener"
    ><code>FragmentArgs</code></a>ÈùûÂ∏∏Á±ª‰ºº‰∫éButterKnife„ÄÇÂÆÉ‰ΩøÁî®ÂèçÂ∞ÑÊú∫Âà∂Êù•ÂàõÂª∫ÂØπË±°ÔºåËÄå‰∏çÈúÄË¶ÅÂºÄÂèëËÄÖÊâãÂä®Êù•ÂÅöËøô‰∫õ„ÄÇFragmentArgsÂú®Â§ÑÁêÜÊ≥®Ëß£ÁöÑÊó∂ÂÄôÁîüÊàê‰∏Ä‰∏™ÁâπÂà´ÁöÑÊü•ÊâæË°®Á±ªÔºåÂÆÉÂÖ∂ÂÆûÂ∞±ÊòØ‰∏ÄÁßçÂìàÂ∏åË°®ÔºåÊâÄ‰ª•Êï¥‰∏™FragmentArgsÂ∫ìÂè™ÊòØÂú®Á¨¨‰∏ÄÊ¨°‰ΩøÁî®ÁöÑÊó∂ÂÄôÔºåÊâßË°å‰∏ÄÊ¨°ÂèçÂ∞ÑË∞ÉÁî®Ôºå‰∏ÄÊó¶Êï¥‰∏™<code>Class.forName()</code>ÁöÑFragemntÁöÑÂèÇÊï∞ÂØπË±°Ë¢´ÂàõÂª∫ÔºåÂêéÈù¢ÁöÑÈÉΩÊòØÊú¨Âú∞‰ª£Á†ÅËøêË°å‰∫Ü„ÄÇ</p>
<p>‰Ωú‰∏∫‰∏Ä‰∏™Ê≥®Ëß£Ê≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂºÄÂèëËÄÖÔºåËøô‰∫õÈÉΩÁî±‰Ω†Êù•ÂÜ≥ÂÆöÔºå‰∏∫ÂÖ∂‰ªñÁöÑÊ≥®Ëß£Âô®‰ΩøÁî®ËÄÖÔºåÂú®ÂèçÂ∞ÑÂíåÂèØÁî®ÊÄß‰∏äÊâæÂà∞‰∏Ä‰∏™Â•ΩÁöÑÂπ≥Ë°°„ÄÇ</p>
<h2 id="ÊÄªÁªì">ÊÄªÁªì
</h2><p>Âà∞Ê≠§ÔºåÊàëÂ∏åÊúõ‰Ω†ÂØπÊ≥®Ëß£Â§ÑÁêÜËøáÁ®ãÊúâ‰∏Ä‰∏™ÈùûÂ∏∏Ê∑±ÂàªÁöÑÁêÜËß£„ÄÇÊàëÂøÖÈ°ªÂÜçÊ¨°ËØ¥Êòé‰∏Ä‰∏ãÔºöÊ≥®Ëß£Â§ÑÁêÜÂô®ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Âº∫Â§ßÁöÑÂ∑•ÂÖ∑ÔºåÂáèÂ∞ë‰∫ÜÂæàÂ§öÊó†ËÅäÁöÑ‰ª£Á†ÅÁöÑÁºñÂÜô„ÄÇÊàë‰πüÊÉ≥ÊèêÈÜíÁöÑÊòØÔºåÊ≥®Ëß£Â§ÑÁêÜÂô®ÂèØ‰ª•ÂÅöÂà∞ÊØîÊàë‰∏äÈù¢ÊèêÂà∞ÁöÑÂ∑•ÂéÇÊ®°ÂºèÁöÑ‰æãÂ≠êÂ§çÊùÇÂæàÂ§öÁöÑ‰∫ãÊÉÖ„ÄÇ‰æãÂ¶ÇÔºåÊ≥õÂûãÁöÑÁ±ªÂûãÊì¶Èô§ÔºåÂõ†‰∏∫Ê≥®Ëß£Â§ÑÁêÜÂô®ÊòØÂèëÁîüÂú®Á±ªÂûãÊì¶Èô§Ôºàtype erasureÔºâ‰πãÂâçÁöÑÔºàËØëËÄÖÊ≥®ÔºöÁ±ªÂûãÊì¶Èô§ÂèØ‰ª•ÂèÇËÄÉ<a class="link" href="http://justjavac.iteye.com/blog/1741638"  target="_blank" rel="noopener"
    >ËøôÈáå</a>Ôºâ„ÄÇÂ∞±ÂÉè‰Ω†ÊâÄÁúãÂà∞ÁöÑÔºå‰Ω†Âú®ÂÜôÊ≥®Ëß£Â§ÑÁêÜÁöÑÊó∂ÂÄôÔºåÊúâ‰∏§‰∏™ÊôÆÈÅçÁöÑÈóÆÈ¢ò‰Ω†ÈúÄË¶ÅÂ§ÑÁêÜÔºöÁ¨¨‰∏ÄÈóÆÈ¢òÔºå Â¶ÇÊûú‰Ω†ÊÉ≥Âú®ÂÖ∂‰ªñÁ±ª‰∏≠‰ΩøÁî®ElementUtils, TypeUtilsÂíåMessagerÔºå‰Ω†Â∞±ÂøÖÈ°ªÊää‰ªñ‰ª¨‰Ωú‰∏∫ÂèÇÊï∞‰º†ËøõÂéª„ÄÇÂú®Êàë‰∏∫AndroidÂºÄÂèëÁöÑÊ≥®Ëß£Âô®<a class="link" href="https://github.com/sockeqwe/AnnotatedAdapter"  target="_blank" rel="noopener"
    ><code>AnnotatedAdapter</code></a>‰∏≠ÔºåÊàëÂ∞ùËØï‰ΩøÁî®DaggerÔºà‰∏Ä‰∏™‰æùËµñÊ≥®ÂÖ•Â∫ìÔºâÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇÂú®Ëøô‰∏™ÁÆÄÂçïÁöÑÂ§ÑÁêÜ‰∏≠‰ΩøÁî®ÂÆÉÂê¨Ëµ∑Êù•ÊúâÁÇπËøáÂ§¥‰∫ÜÔºå‰ΩÜÊòØÂÆÉÁ°ÆÂÆûÂæàÂ•ΩÁî®ÔºõÁ¨¨‰∫å‰∏™ÈóÆÈ¢òÔºå‰Ω†ÂøÖÈ°ªÂÅö<strong>Êü•ËØ¢</strong><code>Elements</code>ÁöÑÊìç‰Ωú„ÄÇÂ∞±ÊÉ≥Êàë‰πãÂâçÊèêÂà∞ÁöÑÔºåÂ§ÑÁêÜElementÂ∞±Ëß£ÊûêXMLÊàñËÄÖHTML‰∏ÄÊ†∑„ÄÇÂØπ‰∫éHTML‰Ω†ÂèØ‰ª•ÊòØÁî®jQueryÔºåÂ¶ÇÊûúÂú®Ê≥®Ëß£Â§ÑÁêÜÂô®‰∏≠ÔºåÊúâÁ±ª‰ºº‰∫éjQueryÁöÑÂ∫ìÈÇ£ÈÇ£ÁªùÂØπÊòØÈÖ∑ÊØô‰∫Ü„ÄÇÂ¶ÇÊûú‰Ω†Áü•ÈÅìÊúâÁ±ª‰ººÁöÑÂ∫ìÔºåËØ∑Âú®‰∏ãÈù¢ÁöÑËØÑËÆ∫ÂëäËØâÊàë„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÁöÑÊòØÔºåÂú®FactoryProcessor‰ª£Á†Å‰∏≠Êúâ‰∏Ä‰∫õÁº∫Èô∑ÂíåÈô∑Èò±„ÄÇËøô‰∫õ‚ÄúÈîôËØØ‚ÄùÊòØÊàëÊïÖÊÑèÊîæËøõÂéªÁöÑÔºåÊòØ‰∏∫‰∫ÜÊºîÁ§∫‰∏Ä‰∫õÂú®ÂºÄÂèëËøáÁ®ã‰∏≠ÁöÑÂ∏∏ËßÅÈîôËØØÔºà‰æãÂ¶Ç‚ÄúAttempt to recreate a file‚ÄùÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Âü∫‰∫éFactoryProcessorÂÜô‰Ω†Ëá™Â∑±Ê≥®Ëß£Â§ÑÁêÜÂô®ÔºåËØ∑<strong>‰∏çË¶Å</strong>Áõ¥Êé•Êã∑Ë¥ùÁ≤òË¥¥Ëøô‰∫õÈô∑Èò±ËøáÂéªÔºå‰Ω†Â∫îËØ•‰ªéÊúÄÂºÄÂßãÂ∞±ÈÅøÂÖçÂÆÉ‰ª¨„ÄÇ</p>
<p>ÊàëÂú®ÂêéÁª≠ÁöÑÂçöÂÆ¢‰∏≠Â∞Ü‰ºöÂÜôÊ≥®Ëß£Â§ÑÁêÜÂô®ÁöÑÂçïÂÖÉÊµãËØïÔºåÊï¨ËØ∑ÂÖ≥Ê≥®„ÄÇ</p>
<h3 id="heading">
</h3>
</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="malinkang/malinkang"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzMTUwNzEyODU="
    data-category="General"
    data-category-id="DIC_kwDOEsebNc4CbSPg"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2013 - 
        
        2024 malinkang
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>
<script>
    var s1 = '2014-01-01';
    s1 = new Date(s1.replace(/-/g, "/"));
    s2 = new Date();
    var days = s2.getTime() - s1.getTime();
    var number_of_days = parseInt(days / (1000 * 60 * 60 * 24));
    document.getElementById('days').innerHTML = number_of_days;
</script>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
